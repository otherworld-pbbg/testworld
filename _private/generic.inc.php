<?php

include_once "class_player.inc.php";
include_once "abbr.inc.php";

function queryDelete($mysqli, $table, $where, $order, $limit=0) {
	if ($limit==0) $sql = "DELETE FROM `$table` WHERE $where ORDER BY $order";
	else $sql = "DELETE FROM `$table` WHERE $where ORDER BY $order LIMIT $limit";
	$mysqli->query($sql);
	return $mysqli->affected_rows;
}

function csvIntoArray($filename, $delimiter=';') {

	$header = NULL;
	$data = array();
	if (($handle = fopen($filename, 'r')) !== FALSE)
	{
		while (($row = fgetcsv($handle, 1000, $delimiter)) !== FALSE)
		{
			if(!$header)
				$header = $row;
			else
			$data[] = array_combine($header, $row);
		}
		fclose($handle);
	}
	return $data;
}

function searchByField($multi_array, $field, $value)
{
	$retArr = array();
	foreach($multi_array as $key => $sub_array)
	{
		if ($sub_array[$field] == $value) {
			$retArr[] = $multi_array[$key];
		}
	}
	return $retArr;
}

function searchSingle($multi_array, $field, $value)
{
	if (!is_array($multi_array)) return false;
	foreach($multi_array as $key => $sub_array)
	{
		if ($sub_array[$field] == $value) {
			return $multi_array[$key];
		}
	}
	return false;
}

function cleanup($string) {
	$string = str_replace("'","&#39;", $string);
	$string = str_replace("'","&#34;", $string);
	return $string;
}

function arrayToComma($array) {
	$str = "";
	foreach ($array as $item) {
		if ($str != "") $str .= ", ";
		$str .= $item;
	}
	return $str;
}

function checkHex($color) {
	//Check for a hex color string '#c1c2b4'
	if (preg_match('/^#[a-f0-9]{6}$/i', $color))
	{
		return $color;//Color is valid
	}
	else if (preg_match('/^[a-f0-9]{6}$/i', $color))
	{
		return '#' . $color;//Add the hash sign, then return
	}
	else return false;
}

function getColorSpan($level, $text="") {
	if ($text=="") return "<span class='level" . $level . "'>" . $level . "</span>";
	return "<span class='level" . $level . "'>" . $text . "</span>";
}

function countSpiral($step) {
	$sequence = ceil(sqrt($step));//1 =1, 2...4 = 2, 5...9 = 3, 10...16 = 4
	$change = $sequence % 2;
	
	if ($change==0) {
		//even, these aren't final because they don't account for the upright part yet. That's calculated below
		$ychange = floor($sequence/2);
	}
	else {
		//odd
		$ychange = floor(($sequence-1)/2) * -1;
	}
	
	$straight_part = $sequence+1;
	$upright_part = $sequence-2;
	
	$behind = pow($sequence, 2) - $step;
	
	if ($behind<$straight_part) {
		//The x is in the straight part
		if ($ychange<0) $xchange = $ychange*-1 - $behind + 1;
		else if ($ychange>0) $xchange = $ychange*-1 + $behind;
		else $xchange = 1 - $behind;//This takes step 0 into account
	}
	else {
		$xchange = $ychange;
		//The x is in the upright part
		if ($ychange>0) {
			$ychange-=$behind-$straight_part+1;
		}
		else if ($ychange<0) {
			$ychange+=$behind-$straight_part+1;
		}
	}
	
	return array(
		"xchange" => $xchange,
		"ychange" => $ychange
		);
}

function aasort (&$array, $key) {
	//http://stackoverflow.com/questions/2699086/sort-multi-dimensional-array-by-value
	//aasort($your_array,"column");
    $sorter=array();
    $ret=array();
    reset($array);
    foreach ($array as $ii => $va) {
        $sorter[$ii]=$va[$key];
    }
    asort($sorter);
    foreach ($sorter as $ii => $va) {
        $ret[$ii]=$array[$ii];
    }
    $array=$ret;
}

function getActivityLog($mysqli, $limit=100) {
	$retArr = array();
	$sql = "SELECT `userFK` as `user`, `timestamp` as `time` FROM `activity_log` ORDER BY `uid` DESC LIMIT $limit";
	$res = $mysqli->query($sql);
	if (mysqli_num_rows($res)) {
		while ($row = mysqli_fetch_assoc($res)) {
			$retArr[] = $row;
		}
		return $retArr;
	}
	else return -1;
}

function printActivityLog($mysqli, $log) {
	foreach ($log as $entry) {
		$p = new Player($mysqli, $entry["user"]);
		echo "<p>";
		echo "<a href='index.php?page=viewPlayer&ouser=" . $entry["user"] . "' class='normal'>";
		echo $p->getUsername();
		echo "</a>";
		echo " (id " . $entry["user"] . ")";
		echo " logged in ";
		echo $entry["time"];
		echo "</p>";
	}
}

function getActiveRequests($mysqli) {
	$retArr = array();
	$sql = "SELECT `uid` FROM `requests` WHERE `filler`=0 ORDER BY `uid`";
	$res = $mysqli->query($sql);
	if (mysqli_num_rows($res)) {
		while ($row = mysqli_fetch_row($res)) {
			$retArr[] = $row[0];
		}
		return $retArr;
	}
	else return -1;
}

function printLetterForm($num, $pattern, $arr_v_begin, $arr_v_middle, $arr_v_middle2, $arr_v_end, $arr_c_begin, $arr_c_middle, $arr_c_middle2, $arr_c_end) {
	$vowels = array(
		"a",
		"e",
		"i",
		"o",
		"u",
		"y",
		"aa",
		"ae",
		"ai",
		"ao",
		"au",
		"ay",
		"ea",
		"ee",
		"ei",
		"eo",
		"eu",
		"ey",
		"ia",
		"ie",
		"ii",
		"io",
		"iu",
		"iy",
		"oa",
		"oe",
		"oi",
		"oo",
		"ou",
		"ua",
		"ue",
		"ui",
		"uo",
		"uu",
		"uy",
		"ya",
		"ye",
		"yi",
		"yo",
		"yu",
		"yy"
		);
	
	$consonants = array(
		"b",
		"bb",
		"bbl",
		"bh",
		"bl",
		"ch",	
		"ck",
		"d",
		"dd",
		"dg",
		"dj",
		"dz",
		"f",
		"ff",
		"fl",
		"g",
		"gg",
		"gh",
		"gl",
		"h",
		"hh",
		"ht",
		"j",
		"k",
		"kh",
		"kk",
		"l",
		"lj",
		"lk",
		"ll",
		"lm",
		"ln",
		"lp",
		"lst",
		"m",
		"mj",
		"mm",
		"n",
		"nj",
		"nn",
		"p",
		"pf",
		"ph",
		"pl",
		"ppl",
		"r",
		"rh",
		"rkk",
		"rm",
		"rn",
		"rr",
		"rst",
		"rt",
		"rtt",
		"s",
		"sch",
		"sk",
		"st",
		"t",
		"th",
		"tj",
		"ts",
		"tt",
		"v",
		"x",
		"y",
		"z"
		);
	echo "<form method='post' action='word.php'>";
	
	ptag("label", "Number of words to generate", "for='num'");
	ptag("input", "", "type='number' min='1' max='100' value='$num' id='num' name='num' style='width: 3em'");
	
	ptag("label", "Pattern", "for='pat'");
	ptag("input", "", "value='$pattern' id='pat' name='pattern'");
	
	para("a - start vowel");
	para("i - middle vowel");
	para("o - middle two vowel");
	para("e - end vowel");

	para("s - start consonant");
	para("m - middle consonant");
	para("d - middle two consonant");
	para("n - end consonant");
	para("Spaces, commas and periods are also accepted but other characters will be replaced by a hashtag. If there are no letters in the pool to choose from, there will be a question mark.");
	
	foreach ($vowels as $key => $v) {
		if (array_key_exists($key, $arr_v_begin)) $val1 = $arr_v_begin[$key];
		else $val1 = 0;
		if (array_key_exists($key, $arr_v_middle)) $val2 = $arr_v_middle[$key];
		else $val2 = 0;
		if (array_key_exists($key, $arr_v_middle2)) $val3 = $arr_v_middle2[$key];
		else $val3 = 0;
		if (array_key_exists($key, $arr_v_end)) $val4 = $arr_v_end[$key];
		else $val4 = 0;
		
		echo "<p>";
		echo $v . ": ";
		echo "Start ";
		ptag("input", "", "type='range' min='0' max='100' name='v_begin_$key' value='$val1' style='width: 5em'");
		echo "Middle ";
		ptag("input", "", "type='range' min='0' max='100' name='v_middle_$key' value='$val2' style='width: 5em'");
		echo "Middle2 ";
		ptag("input", "", "type='range' min='0' max='100' name='v_middle2_$key' value='$val3' style='width: 5em'");
		echo "End ";
		ptag("input", "", "type='range' min='0' max='100' name='v_end_$key' value='$val4' style='width: 5em'");
		echo "</p>";
	}
	
	ptag("input", "", "type='hidden' name='v_l' value='". sizeof($vowels)."'");
	
	foreach ($consonants as $key => $c) {
		if (array_key_exists($key, $arr_c_begin)) $val1 = $arr_c_begin[$key];
		else $val1 = 0;
		if (array_key_exists($key, $arr_c_middle)) $val2 = $arr_c_middle[$key];
		else $val2 = 0;
		if (array_key_exists($key, $arr_c_middle2)) $val3 = $arr_c_middle2[$key];
		else $val3 = 0;
		if (array_key_exists($key, $arr_c_end)) $val4 = $arr_c_end[$key];
		else $val4 = 0;
		
		echo "<p>";
		echo $c . ": ";
		echo "Start ";
		ptag("input", "", "type='range' min='0' max='100' name='c_begin_$key' value='$val1' style='width: 5em'");
		echo "Middle ";
		ptag("input", "", "type='range' min='0' max='100' name='c_middle_$key' value='$val2' style='width: 5em'");
		echo "Middle2 ";
		ptag("input", "", "type='range' min='0' max='100' name='c_middle2_$key' value='$val3' style='width: 5em'");
		echo "End ";
		ptag("input", "", "type='range' min='0' max='100' name='c_end_$key' value='$val4' style='width: 5em'");
		echo "</p>";
	}
	ptag("input", "", "type='hidden' name='c_l' value='". sizeof($consonants)."'");
	ptag("input", "", "type='submit' value='Change values'");
	echo "</form>";
}

function createLetterPools($arr_v_begin, $arr_v_middle, $arr_v_middle2, $arr_v_end, $arr_c_begin, $arr_c_middle, $arr_c_middle2, $arr_c_end) {
	
	$vowels = array(
		"a",
		"e",
		"i",
		"o",
		"u",
		"y",
		"aa",
		"ae",
		"ai",
		"ao",
		"au",
		"ay",
		"ea",
		"ee",
		"ei",
		"eo",
		"eu",
		"ey",
		"ia",
		"ie",
		"ii",
		"io",
		"iu",
		"iy",
		"oa",
		"oe",
		"oi",
		"oo",
		"ou",
		"ua",
		"ue",
		"ui",
		"uo",
		"uu",
		"uy",
		"ya",
		"ye",
		"yi",
		"yo",
		"yu",
		"yy"
		);
	
	$consonants = array(
		"b",
		"bb",
		"bbl",
		"bh",
		"bl",
		"ch",	
		"ck",
		"d",
		"dd",
		"dg",
		"dj",
		"dz",
		"f",
		"ff",
		"fl",
		"g",
		"gg",
		"gh",
		"gl",
		"h",
		"hh",
		"ht",
		"j",
		"k",
		"kh",
		"kk",
		"l",
		"lj",
		"lk",
		"ll",
		"lm",
		"ln",
		"lp",
		"lst",
		"m",
		"mj",
		"mm",
		"n",
		"nj",
		"nn",
		"p",
		"pf",
		"ph",
		"pl",
		"ppl",
		"r",
		"rh",
		"rkk",
		"rm",
		"rn",
		"rr",
		"rst",
		"rt",
		"rtt",
		"s",
		"sch",
		"sk",
		"st",
		"t",
		"th",
		"tj",
		"ts",
		"tt",
		"v",
		"x",
		"y",
		"z"
		);
	
	//start vowel - end consonant
	//start vowel - middle consonant - end vowel
	//start vowel - middle consonant - middle vowel - end consonant
	//start vowel - middle consonant - middle vowel - middle consonant2 - end vowel
	//start vowel - middle consonant - middle vowel - middle consonant2 - middle vowel2 - end consonant
	//start consonant - end vowel
	//start consonant - middle vowel - end consonant
	//start consonant - middle vowel - middle consonant - end vowel
	//start consonant - middle vowel - middle consonant - middle vowel2 - end consonant 
	//start consonant - middle vowel - middle consonant - middle vowel2 - middle consonant2 - end vowel
	
	$begin_v = array();
	$middle_v = array();
	$middle2_v = array();
	$end_v = array();
	$begin_c = array();
	$middle_c = array();
	$middle2_c = array();
	$end_c = array();
	
	foreach ($vowels as $key => $v) {
		if ($arr_v_begin[$key]>0) {
			for ($i = 0; $i < $arr_v_begin[$key]; $i++) {
				$begin_v[] = $v;
			}
		}
		if ($arr_v_middle[$key]>0) {
			for ($i = 0; $i < $arr_v_middle[$key]; $i++) {
				$middle_v[] = $v;
			}
		}
		if ($arr_v_middle2[$key]>0) {
			for ($i = 0; $i < $arr_v_middle2[$key]; $i++) {
				$middle2_v[] = $v;
			}
		}
		if ($arr_v_end[$key]>0) {
			for ($i = 0; $i < $arr_v_end[$key]; $i++) {
				$end_v[] = $v;
			}
		}
	}
	
	foreach ($consonants as $key => $c) {
		if ($arr_c_begin[$key]>0) {
			for ($i = 0; $i < $arr_c_begin[$key]; $i++) {
				$begin_c[] = $c;
			}
		}
		if ($arr_c_middle[$key]>0) {
			for ($i = 0; $i < $arr_c_middle[$key]; $i++) {
				$middle_c[] = $c;
			}
		}
		if ($arr_c_middle2[$key]>0) {
			for ($i = 0; $i < $arr_c_middle2[$key]; $i++) {
				$middle2_c[] = $c;
			}
		}
		if ($arr_c_end[$key]>0) {
			for ($i = 0; $i < $arr_c_end[$key]; $i++) {
				$end_c[] = $c;
			}
		}
	}
	
	return array("bv" => $begin_v, "mv" => $middle_v, "m2v" => $middle2_v, "ev" => $end_v, "bc" => $begin_c, "mc" => $middle_c, "m2c" => $middle2_c, "ec" => $end_c);
}

function generateWords($pos, $pattern, $num) {
	
	echo "<p>";
	for ($j = 0; $j < $num; $j++) {
		for ($i = 0; $i < mb_strlen($pattern); $i++) {
			$key = substr($pattern, $i, 1);
			if ($key == "a") {
				if ($pos["bv"]) {
					$rand = rand(0, sizeof($pos["bv"])-1);
					echo $pos["bv"][$rand];
				}
				else echo "?";
			}
			else if ($key == "i") {
				if ($pos["mv"]) {
					$rand = rand(0, sizeof($pos["mv"])-1);
					echo $pos["mv"][$rand];
				}
				else echo "?";
			}
			else if ($key == "o") {
				if ($pos["m2v"]) {
					$rand = rand(0, sizeof($pos["m2v"])-1);
					echo $pos["m2v"][$rand];
				}
				else echo "?";
			}
			else if ($key == "e") {
				if ($pos["ev"]) {
					$rand = rand(0, sizeof($pos["ev"])-1);
					echo $pos["ev"][$rand];
				}
				else echo "?";
			}
			else if ($key == "s") {
				if ($pos["bc"]) {
					$rand = rand(0, sizeof($pos["bc"])-1);
					echo $pos["bc"][$rand];
				}
				else echo "?";
			}
			else if ($key == "m") {
				if ($pos["mc"]) {
					$rand = rand(0, sizeof($pos["mc"])-1);
					echo $pos["mc"][$rand];
				}
				else echo "?";
			}
			else if ($key == "d") {
				if ($pos["m2c"]) {
					$rand = rand(0, sizeof($pos["m2c"])-1);
					echo $pos["m2c"][$rand];
				}
				else echo "?";
			}
			else if ($key == "n") {
				if ($pos["ec"]) {
					$rand = rand(0, sizeof($pos["ec"])-1);
					echo $pos["ec"][$rand];
				}
				else echo "?";
			}
			else if ($key == " ") {
				echo " ";
			}
			else if ($key == ",") {
				echo ",";
			}
			else if ($key == ".") {
				echo ".";
			}
			else echo "#";
		}
		if ($j < $num-1) echo ", ";
	}
	echo "</p>";
}

function generatePseudoWord() {
	$start_consonants = array(
		"b",
		"c",
		"d",
		"f",
		"g",
		"j",
		"l",
		"m",
		"n",
		"p",
		"r",
		"s",
		"t",
		"w",
		"x",
		"z",
		"y",
		"bl",
		"gr",
		"cr",
		"ch",
		"fl",
		"th",
		"sh",
		"dr",
		"sm",
		"sn",
		"bl",
		"br"
		);
	
	$vowels_start = array(
		"a",
		"au",
		"e",
		"o",
		"ee",
		"oo",
		"ai",
		"ou",
		"ea",
		"oa"
		);
	
	$vowels_middle = array(
		"a",
		"e",
		"i",
		"o",
		"u",
		"ee",
		"oo",
		"ai",
		"ou",
		"ea",
		"oa"
		);
	
	$vowels_end = array(
		"y",
		"e",
		"ay",
		"ey",
		"oy",
		"ee",
		"oo",
		"ow",
		"aw",
		"ew",
		"is",
		"as",
		"os",
		"us",
		"er",
		"our",
		"ah",
		"el",
		"um",
		"on",
		"a"
		);
	$end_consonants = array(
		"b",
		"bb",
		"d",
		"dd",
		"ll",
		"ng",
		"ss",
		"sh",
		"t",
		"zz",
		"x",
		"xx"
		);
	
	$middle_consonants = array(
		"bb",
		"bbl",
		"dd",
		"ff",
		"fl",
		"gg",
		"ll",
		"lm",
		"mm",
		"nd",
		"nn",
		"nt",
		"pp",
		"r",
		"rb",
		"rn",
		"rm",
		"rr",
		"ss",
		"tt"
		);
	
	$simple_consonants = array(
		"b",
		"n",
		"k",
		"l",
		"m",
		"t",
		"v",
		"p",
		"s",
		"z",
		"x",
		"y",
		"j",
		"b",
		"n",
		"k",
		"l",
		"m",
		"t",
		"w"
		);
	
	$simple_vowels = array(
		"a",
		"i",
		"u",
		"o",
		"e"
		);
	
	$pattern = rand(0,9);
	
	switch ($pattern) {
	case 0:
		$str = $start_consonants[rand(0,sizeof($start_consonants)-1)] . $vowels_end[rand(0,sizeof($vowels_end)-1)];
		break;
	case 1:
		$vowel = $simple_vowels[rand(0,sizeof($simple_vowels)-1)];
		$consonant = $simple_consonants[rand(0,sizeof($simple_consonants)-1)];
		$str = $consonant . $vowel . $consonant . $vowel . $simple_consonants[rand(0,sizeof($simple_consonants)-1)] . $simple_vowels[rand(0,sizeof($simple_vowels)-1)];
		break;
	case 2:
		$vowel = $simple_vowels[rand(0,sizeof($simple_vowels)-1)];
		$consonant = $simple_consonants[rand(0,sizeof($simple_consonants)-1)];
		$str = $simple_consonants[rand(0,sizeof($simple_consonants)-1)] . $vowel . $consonant . $vowel . $consonant . $simple_vowels[rand(0,sizeof($simple_vowels)-1)];
		break;
	case 3:
		$vowel = $simple_vowels[rand(0,sizeof($simple_vowels)-1)];
		$consonant = $simple_consonants[rand(0,sizeof($simple_consonants)-1)];
		$str = $simple_consonants[rand(0,sizeof($simple_consonants)-1)] . $simple_vowels[rand(0,sizeof($simple_vowels)-1)] . $consonant . $vowel . $consonant . $vowel;
		break;
	case 4:
		$vowel = $vowels_end[rand(1,sizeof($vowels_end)-1)];
		$consonant = $start_consonants[rand(0,sizeof($start_consonants)-1)];
		$str = $consonant . $vowel . $consonant . $vowel;
		break;
	case 5:
		$vowel = $simple_vowels[rand(0,sizeof($simple_vowels)-1)];
		$str = $start_consonants[rand(0,sizeof($start_consonants)-1)] . $vowel . $middle_consonants[rand(0,sizeof($middle_consonants)-1)] . $vowel . "ge";
		break;
	case 6:
		$str = $start_consonants[rand(0,sizeof($start_consonants)-1)] . $vowels_middle[rand(0,sizeof($vowels_middle)-1)] . $middle_consonants[rand(0,sizeof($middle_consonants)-1)] . "ot";
		break;
	case 7:
		$vowel = $simple_vowels[rand(0,sizeof($simple_vowels)-1)];
		$consonant = $simple_consonants[rand(0,sizeof($simple_consonants)-1)];
		$str = $simple_consonants[rand(0,sizeof($simple_consonants)-1)] . $vowel . $consonant . $simple_vowels[rand(0,sizeof($simple_vowels)-1)] . $consonant . $vowel;
		break;
	case 8:
		$str = $simple_consonants[rand(0,sizeof($simple_consonants)-1)] . $simple_vowels[rand(0,sizeof($simple_vowels)-1)] . $simple_consonants[rand(0,sizeof($simple_consonants)-1)] . $simple_vowels[rand(0,sizeof($simple_vowels)-1)];
		break;
	case 9:
		$str = $start_consonants[rand(0,sizeof($start_consonants)-1)] . $vowels_middle[rand(0,sizeof($vowels_middle)-1)] . $end_consonants[rand(0,sizeof($end_consonants)-1)];
		break;
	}
	
	return $str;
}

function rgb2hsl($r, $g, $b) {
   $var_R = ($r / 255);
   $var_G = ($g / 255);
   $var_B = ($b / 255);

   $var_Min = min($var_R, $var_G, $var_B);
   $var_Max = max($var_R, $var_G, $var_B);
   $del_Max = $var_Max - $var_Min;

   $v = $var_Max;

   if ($del_Max == 0) {
      $h = 0;
      $s = 0;
   } else {
      $s = $del_Max / $var_Max;

      $del_R = ( ( ( $var_Max - $var_R ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;
      $del_G = ( ( ( $var_Max - $var_G ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;
      $del_B = ( ( ( $var_Max - $var_B ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;

      if      ($var_R == $var_Max) $h = $del_B - $del_G;
      else if ($var_G == $var_Max) $h = ( 1 / 3 ) + $del_R - $del_B;
      else if ($var_B == $var_Max) $h = ( 2 / 3 ) + $del_G - $del_R;

      if ($h < 0) $h++;
      if ($h > 1) $h--;
   }

   return array($h, $s, $v);
}

function hsl2rgb($h, $s, $v) {
    if($s == 0) {
        $r = $g = $B = $v * 255;
    } else {
        $var_H = $h * 6;
        $var_i = floor( $var_H );
        $var_1 = $v * ( 1 - $s );
        $var_2 = $v * ( 1 - $s * ( $var_H - $var_i ) );
        $var_3 = $v * ( 1 - $s * (1 - ( $var_H - $var_i ) ) );

        if       ($var_i == 0) { $var_R = $v     ; $var_G = $var_3  ; $var_B = $var_1 ; }
        else if  ($var_i == 1) { $var_R = $var_2 ; $var_G = $v      ; $var_B = $var_1 ; }
        else if  ($var_i == 2) { $var_R = $var_1 ; $var_G = $v      ; $var_B = $var_3 ; }
        else if  ($var_i == 3) { $var_R = $var_1 ; $var_G = $var_2  ; $var_B = $v     ; }
        else if  ($var_i == 4) { $var_R = $var_3 ; $var_G = $var_1  ; $var_B = $v     ; }
        else                   { $var_R = $v     ; $var_G = $var_1  ; $var_B = $var_2 ; }

        $r = $var_R * 255;
        $g = $var_G * 255;
        $B = $var_B * 255;
    }    
    return array($r, $g, $B);
}

function changeHue($original, $change) {
	$array = hex2rgb($original);
	$hsl = rgb2hsl($array[0], $array[1], $array[2]);
	if ($hsl[0]<0.7) $change*=-1;
	$hsl[0] = min(1,max(0,($hsl[0]+($change/255))));
	
	$rgb = hsl2rgb($hsl[0], $hsl[1], $hsl[2]);
	return rgb2hex($rgb);
}

function rgb2hex($rgb = array(0, 0, 0)) {
	//https://gist.github.com/Pushplaybang/5432844
	$hex = "#";
	$hex .= str_pad(dechex($rgb[0]), 2, "0", STR_PAD_LEFT);
	$hex .= str_pad(dechex($rgb[1]), 2, "0", STR_PAD_LEFT);
	$hex .= str_pad(dechex($rgb[2]), 2, "0", STR_PAD_LEFT);
	
	return $hex; // returns the hex value including the number sign (#)
}

function hex2rgb($color = "#000000"){
	//http://www.jonasjohn.de/snippets/php/hex2rgb.htm
    $color = str_replace('#', '', $color);
    if (strlen($color) != 6){ return array(0,0,0); }
    $rgb = array();
    for ($x=0;$x<3;$x++){
        $rgb[$x] = hexdec(substr($color,(2*$x),2));
    }
    return $rgb;
}

function adjustBrightness($hex, $steps) {
	//https://stackoverflow.com/questions/3512311/how-to-generate-lighter-darker-color-with-php
    // Steps should be between -255 and 255. Negative = darker, positive = lighter
    $steps = max(-255, min(255, $steps));

    // Normalize into a six character long hex string
    $hex = str_replace('#', '', $hex);
    if (strlen($hex) == 3) {
        $hex = str_repeat(substr($hex,0,1), 2).str_repeat(substr($hex,1,1), 2).str_repeat(substr($hex,2,1), 2);
    }

    // Split into three parts: R, G and B
    $color_parts = str_split($hex, 2);
    $return = '#';

    foreach ($color_parts as $color) {
        $color   = hexdec($color); // Convert to decimal
        $color   = max(0,min(255,$color + $steps)); // Adjust color
        $return .= str_pad(dechex($color), 2, '0', STR_PAD_LEFT); // Make two char hex code
    }

    return $return;
}

function mix($color_1 = array(0, 0, 0), $color_2 = array(0, 0, 0), $weight = 0.5)
{
	$ca1 = array();
	$ca2 = array();
	$ca3 = array();
	foreach ($color_1 as $c1) {
		$c1 *= $weight;
		$ca1[] = $c1;
	}
	foreach ($color_2 as $c2) {
		$c2 *= 1-$weight;
		$ca2[] = $c2;
	}
	foreach ($ca1 as $key => $c3) {
		$ca3[] = $c3+$ca2[$key];
	}
	
	return $ca3;
}
function tint($color, $weight = 0.5)
{
	$t = $color;
	if(is_string($color)) $t = hex2rgb($color);
	$u = mix($t, array(255, 255, 255), $weight);
	if(is_string($color)) return rgb2hex($u);
	return $u;
}
function tone($color, $weight = 0.5)
{
	$t = $color;
	if(is_string($color)) $t = hex2rgb($color);
	$u = mix($t, array(128, 128, 128), $weight);
	if(is_string($color)) return rgb2hex($u);
	return $u;
}
function shade($color, $weight = 0.5)
{
	$t = $color;
	if(is_string($color)) $t = hex2rgb($color);
	$u = mix($t, array(0, 0, 0), $weight);
	if(is_string($color)) return rgb2hex($u);
	return $u;
}

function between($var, $lower, $upper) {
	if ($var>$lower&&$var<$upper) return true;
	return false;
}

function ibetween($var, $lower, $upper) {
	//inclusive
	if ($var>=$lower&&$var<=$upper) return true;
	return false;
}

function abetween($var, $lower, $upper) {
	//first one inclusive, second one not
	if ($var>=$lower&&$var<$upper) return true;
	return false;
}

function bbetween($var, $lower, $upper) {
	//second one inclusive, first one not
	if ($var>$lower&&$var<=$upper) return true;
	return false;
}

function randomWord($type, $plural="") {
	$a = array(
		"the",
		"a",
		"his",
		"their",
		"her",
		"my",
		"your",
		"its",
		"our",
		"no",
		"every"
		);
	
	$c = array(
		"and",
		"that",
		"but",
		"or",
		"as",
		"if",
		"when",
		"than",
		"because",
		"while",
		"where",
		"so",
		"though",
		"after",
		"since",
		"until",
		"whether",
		"before",
		"although",
		"even",
		"nor",
		"like",
		"once",
		"unless",
		"long",
		"now",
		"except",
		"far",
		"for",
		"rather",
		"soon",
		"whereas",
		"not",
		"in",
		"provided",
		"case",
		"till"
		);
	
	$d = array(
		"this",
		"that",
		"what",
		"all",
		"which",
		"some",
		"these",
		"more",
		"many",
		"those",
		"any",
		"another",
		"much",
		"own",
		"same",
		"such",
		"few",
		"most",
		"each",
		"both",
		"several",
		"former",
		"whose",
		"half",
		"less",
		"whatever",
		"little",
		"enough",
		"fewer",
		"either",
		"latter",
		"neither",
		"matter",
		"no"
		);
	
	$i = array(
		"of",
		"in",
		"to",
		"for",
		"with",
		"on",
		"at",
		"from",
		"by",
		"about",
		"as",
		"into",
		"like",
		"through",
		"after",
		"over",
		"between",
		"out",
		"against",
		"during",
		"without",
		"before",
		"under",
		"around",
		"among",
		"such",
		"within",
		"across",
		"toward",
		"off",
		"including",
		"behind",
		"along",
		"up",
		"according",
		"because",
		"well",
		"per",
		"upon",
		"near",
		"than",
		"away",
		"despite",
		"beyond",
		"outside",
		"since",
		"above",
		"onto",
		"inside",
		"rather",
		"throughout",
		"down",
		"instead",
		"front",
		"terms",
		"worth",
		"until",
		"past",
		"next",
		"but",
		"due",
		"except",
		"below",
		"beneath",
		"beside",
		"towards",
		"addition",
		"plus",
		"regarding",
		"vs",
		"other",
		"unlike",
		"via",
		"ahead",
		"top",
		"prior",
		"depending",
		"versus",
		"concerning",
		"favor",
		"re",
		"subject",
		"response",
		"amid",
		"besides",
		"opposed",
		"spite",
		"alongside",
		"regard",
		"respect",
		"charge",
		"behalf",
		"atop",
		"part",
		"light",
		"apart",
		"till"
		);
	
	$j = array(
		"other",
"new",
"good",
"high",
"old",
"great",
"big",
"American",
"small",
"large",
"national",
"young",
"different",
"black",
"long",
"little",
"important",
"political",
"bad",
"white",
"real",
"best",
"right",
"social",
"only",
"public",
"sure",
"low",
"early",
"able",
"human",
"local",
"late",
"hard",
"major",
"better",
"economic",
"strong",
"possible",
"whole",
"free",
"military",
"true",
"federal",
"international",
"full",
"special",
"easy",
"clear",
"recent",
"certain",
"personal",
"open",
"red",
"difficult",
"available",
"likely",
"short",
"single",
"medical",
"current",
"wrong",
"private",
"past",
"foreign",
"fine",
"common",
"poor",
"natural",
"significant",
"similar",
"hot",
"dead",
"central",
"happy",
"serious",
"ready",
"simple",
"left",
"physical",
"general",
"environmental",
"financial",
"blue",
"democratic",
"dark",
"various",
"entire",
"close",
"legal",
"religious",
"cold",
"final",
"main",
"green",
"nice",
"huge",
"popular",
"traditional",
"cultural",
"wide",
"particular",
"top",
"far",
"deep",
"individual",
"specific",
"necessary",
"middle",
"beautiful",
"heavy",
"sexual",
"tough",
"commercial",
"total",
"modern",
"positive",
"civil",
"safe",
"interesting",
"rich",
"western",
"senior",
"key",
"professional",
"successful",
"southern",
"fresh",
"global",
"critical",
"concerned",
"effective",
"original",
"basic",
"powerful",
"perfect",
"involved",
"nuclear",
"British",
"African",
"very",
"sorry",
"normal",
"Chinese",
"front",
"supposed",
"Soviet",
"future",
"potential",
"European",
"independent",
"Christian",
"willing",
"previous",
"interested",
"wild",
"average",
"quick",
"light",
"bright",
"tiny",
"additional",
"present",
"warm",
"annual",
"French",
"responsible",
"regular",
"soft",
"female",
"afraid",
"native",
"broad",
"wonderful",
"growing",
"Indian",
"quiet",
"aware",
"complete",
"active",
"chief",
"cool",
"dangerous",
"moral",
"United",
"academic",
"healthy",
"negative",
"following",
"historical",
"direct",
"daily",
"fair",
"famous",
"familiar",
"appropriate",
"eastern",
"primary",
"clean",
"tall",
"male",
"alive",
"extra",
"domestic",
"northern",
"dry",
"Russian",
"sweet",
"corporate",
"strange",
"urban",
"mental",
"educational",
"favorite",
"greatest",
"complex",
"scientific",
"impossible",
"married",
"alone",
"presidential",
"emotional",
"Supreme",
"thin",
"empty",
"regional",
"Iraqi",
"expensive",
"yellow",
"prime",
"like",
"obvious",
"comfortable",
"angry",
"Japanese",
"thick",
"unique",
"internal",
"ethnic",
"actual",
"sick",
"Catholic",
"long-term",
"slow",
"brown",
"standard",
"English",
"funny",
"correct",
"Jewish",
"crazy",
"just",
"ancient",
"golden",
"German",
"used",
"equal",
"official",
"typical",
"conservative",
"smart",
"rare",
"separate",
"mean",
"industrial",
"surprised",
"busy",
"cheap",
"gray",
"overall",
"initial",
"terrible",
"contemporary",
"multiple",
"essential",
"criminal",
"careful",
"upper",
"tired",
"vast",
"limited",
"proud",
"increased",
"enormous",
"liberal",
"massive",
"rural",
"narrow",
"solid",
"useful",
"secret",
"unusual",
"sharp",
"creative",
"outside",
"gay",
"proper",
"live",
"guilty",
"living",
"technical",
"weak",
"illegal",
"fun",
"Israeli",
"spiritual",
"musical",
"dramatic",
"excellent",
"lucky",
"unable",
"sad",
"brief",
"existing",
"remaining",
"visual",
"violent",
"silent",
"later",
"immediate",
"mass",
"leading",
"double",
"Spanish",
"formal",
"joint",
"opposite",
"consistent",
"grand",
"racial",
"Mexican",
"online",
"glad",
"ordinary",
"numerous",
"practical",
"amazing",
"intense",
"visible",
"competitive",
"congressional",
"fundamental",
"severe",
"fat",
"still",
"Asian",
"digital",
"usual",
"psychological",
"increasing",
"holy",
"so-called",
"constant",
"capable",
"nervous",
"crucial",
"electronic",
"pure",
"fellow",
"smooth",
"nearby",
"inner",
"junior",
"due",
"straight",
"pretty",
"permanent",
"wet",
"pink",
"historic",
"apparent",
"sensitive",
"reasonable",
"wooden",
"elementary",
"aggressive",
"false",
"extreme",
"Latin",
"honest",
"giant",
"substantial",
"conventional",
"fast",
"biological",
"flat",
"mad",
"alternative",
"armed",
"clinical",
"ultimate",
"valuable",
"minor",
"developing",
"classic",
"extraordinary",
"rough",
"pregnant",
"distant",
"Italian",
"Canadian",
"universal",
"super",
"bottom",
"lost",
"unlikely",
"constitutional",
"broken",
"electric",
"literary",
"stupid",
"strategic",
"remarkable",
"blind",
"genetic",
"chemical",
"accurate",
"Olympic",
"odd",
"tight",
"solar",
"square",
"complicated",
"friendly",
"tremendous",
"innocent",
"remote",
"raw",
"surprising",
"mutual",
"advanced",
"attractive",
"diverse",
"relevant",
"ideal",
"working",
"unknown",
"assistant",
"extensive",
"loose",
"considerable",
"intellectual",
"external",
"confident",
"sudden",
"dirty",
"defensive",
"comprehensive",
"prominent",
"stable",
"elderly",
"steady",
"vital",
"mere",
"exciting",
"radical",
"Irish",
"pale",
"round",
"ill",
"vulnerable",
"scared",
"ongoing",
"athletic",
"slight",
"efficient",
"closer",
"wealthy",
"given",
"OK",
"incredible",
"rapid",
"painful",
"helpful",
"organic",
"proposed",
"sophisticated",
"asleep",
"controversial",
"desperate",
"loud",
"sufficient",
"modest",
"agricultural",
"curious",
"downtown",
"eager",
"detailed",
"romantic",
"orange",
"temporary",
"relative",
"brilliant",
"absolute",
"offensive",
"terrorist",
"dominant",
"hungry",
"naked",
"legitimate",
"dependent",
"institutional",
"civilian",
"weekly",
"wise",
"gifted",
"firm",
"running",
"distinct",
"artistic",
"impressive",
"ugly",
"worried",
"moderate",
"subsequent",
"continued",
"frequent",
"awful",
"widespread",
"lovely",
"everyday",
"adequate",
"principal",
"concrete",
"African-American",
"changing",
"colonial",
"dear",
"sacred",
"cognitive",
"collective",
"exact",
"okay",
"homeless",
"gentle",
"related",
"fit",
"magic",
"superior",
"acceptable",
"continuous",
"excited",
"bitter",
"bare",
"subtle",
"pleased",
"ethical",
"secondary",
"experimental",
"net",
"evident",
"harsh",
"suburban",
"retail",
"classical",
"estimated",
"patient",
"missing",
"reliable",
"Roman",
"occasional",
"administrative",
"deadly",
"Hispanic",
"monthly",
"Korean",
"mainstream",
"unlike",
"longtime",
"legislative",
"plain",
"strict",
"inevitable",
"unexpected",
"overwhelming",
"written",
"maximum",
"medium",
"outdoor",
"random",
"minimum",
"fiscal",
"uncomfortable",
"welcome",
"continuing",
"chronic",
"peaceful",
"retired",
"grateful",
"virtual",
"indigenous",
"closed",
"weird",
"outer",
"drunk",
"intelligent",
"convinced",
"driving",
"endless",
"mechanical",
"profound",
"genuine",
"horrible",
"behavioral",
"exclusive",
"meaningful",
"technological",
"pleasant",
"frozen",
"theoretical",
"delicate",
"electrical",
"invisible",
"mild",
"identical",
"precise",
"anxious",
"structural",
"residential",
"nonprofit",
"handsome",
"promising",
"conscious",
"evil",
"teenage",
"decent",
"oral",
"generous",
"purple",
"bold",
"reluctant",
"judicial",
"full-time",
"regulatory",
"diplomatic",
"elegant",
"interior",
"casual",
"productive",
"civic",
"steep",
"dynamic",
"scary",
"disappointed",
"precious",
"representative",
"content",
"realistic",
"hidden",
"tender",
"outstanding",
"lonely",
"artificial",
"abstract",
"silly",
"shared",
"revolutionary",
"rear",
"coastal",
"burning",
"verbal",
"tribal",
"ridiculous",
"automatic",
"divine",
"Dutch",
"Greek",
"talented",
"stiff",
"extended",
"toxic",
"alleged",
"mysterious",
"parental",
"protective",
"faint",
"shallow",
"improved",
"bloody",
"associated",
"near",
"optimistic",
"symbolic",
"hostile",
"combined",
"mixed",
"tropical",
"Cuban",
"spectacular",
"sheer",
"prior",
"immune",
"exotic",
"fascinating",
"secure",
"ideological",
"secular",
"intimate",
"neutral",
"flexible",
"progressive",
"terrific",
"functional",
"cooperative",
"tragic",
"underlying",
"sexy",
"costly",
"ambitious",
"influential",
"uncertain",
"statistical",
"metropolitan",
"rolling",
"aesthetic",
"expected",
"royal",
"minimal",
"anonymous",
"instructional",
"fixed",
"upset",
"cute",
"short-term",
"passing",
"known",
"encouraging",
"accessible",
"dried",
"pro",
"well-known",
"surrounding",
"ecological",
"unprecedented",
"preliminary",
"shy",
"disabled",
"gross",
"damn",
"associate",
"innovative",
"vertical",
"instant",
"required",
"colorful",
"organizational",
"nasty",
"emerging",
"fierce",
"rational",
"vocal",
"unfair",
"risky",
"depressed",
"closest",
"supportive",
"informal",
"Persian",
"perceived",
"sole",
"partial",
"added",
"excessive",
"high-tech",
"logical",
"blank",
"dying",
"developmental",
"faster",
"striking",
"embarrassed",
"isolated",
"suspicious",
"eligible",
"demographic",
"intact",
"elaborate",
"comparable",
"awake",
"feminist",
"dumb",
"philosophical",
"municipal",
"neat",
"mobile",
"brutal",
"voluntary",
"valid",
"unhappy",
"coming",
"distinctive",
"calm",
"theological",
"fragile",
"old-fashioned",
"crowded",
"fantastic",
"level",
"liquid",
"suitable",
"cruel",
"loyal",
"rubber",
"favorable",
"veteran",
"integrated",
"blond",
"explicit",
"disturbing",
"magnetic",
"devastating",
"neighboring",
"consecutive",
"republican",
"worldwide",
"brave",
"dense",
"sunny",
"compelling",
"troubled",
"balanced",
"flying",
"sustainable",
"skilled",
"managing",
"marine",
"organized",
"boring",
"fatal",
"inherent",
"selected",
"naval",
"middle-class"
		);
	
	$m = array(
		"one",
		"two",
		"first",
		"last",
		"three",
		"next",
		"million",
		"four",
		"five",
		"second",
		"six",
		"third",
		"billion",
		"hundred",
		"thousand",
		"seven",
		"eight",
		"ten",
		"nine",
		"dozen",
		"fourth",
		"twenty",
		"fifth",
		"thirty",
		"fifteen",
		"fifty",
		"twelve",
		"sixth",
		"forty",
		"seventh",
		"eleven",
		"eighth",
		"twentieth"
		);
	
	$n = array(
		"unicorn",
		"time",
		"lobster",
		"unicycle",
		"barnacle",
		"pirate",
		"wizard",
"year",
"people",
"way",
"day",
"man",
"thing",
"woman",
"life",
"child",
"world",
"school",
"state",
"family",
"student",
"group",
"country",
"problem",
"hand",
"part",
"place",
"case",
"week",
"company",
"system",
"program",
"question",
"work",
"government",
"number",
"night",
"Mr",
"point",
"home",
"water",
"room",
"mother",
"area",
"money",
"story",
"fact",
"month",
"lot",
"right",
"study",
"book",
"eye",
"job",
"word",
"business",
"issue",
"side",
"kind",
"head",
"house",
"service",
"friend",
"father",
"power",
"hour",
"game",
"line",
"end",
"member",
"law",
"car",
"city",
"community",
"name",
"president",
"team",
"minute",
"idea",
"kid",
"body",
"information",
"back",
"parent",
"face",
"others",
"level",
"office",
"door",
"health",
"person",
"art",
"war",
"history",
"party",
"result",
"change",
"morning",
"reason",
"research",
"girl",
"guy",
"food",
"moment",
"air",
"teacher",
"force",
"education",
"foot",
"boy",
"age",
"policy",
"process",
"music",
"market",
"sense",
"nation",
"plan",
"college",
"interest",
"death",
"experience",
"effect",
"use",
"class",
"control",
"care",
"field",
"development",
"role",
"effort",
"rate",
"heart",
"drug",
"show",
"leader",
"light",
"voice",
"wife",
"police",
"mind",
"price",
"report",
"decision",
"son",
"view",
"relationship",
"town",
"road",
"arm",
"difference",
"value",
"building",
"action",
"model",
"season",
"society",
"tax",
"director",
"position",
"player",
"record",
"paper",
"space",
"ground",
"form",
"event",
"official",
"matter",
"center",
"couple",
"site",
"project",
"activity",
"star",
"table",
"need",
"court",
"American",
"oil",
"situation",
"cost",
"industry",
"figure",
"street",
"image",
"phone",
"data",
"picture",
"practice",
"piece",
"land",
"product",
"doctor",
"wall",
"patient",
"worker",
"news",
"test",
"movie",
"north",
"love",
"support",
"technology",
"step",
"baby",
"computer",
"type",
"attention",
"film",
"Republican",
"tree",
"source",
"organization",
"hair",
"look",
"century",
"evidence",
"window",
"culture",
"chance",
"brother",
"energy",
"period",
"course",
"summer",
"plant",
"opportunity",
"term",
"letter",
"condition",
"choice",
"rule",
"daughter",
"administration",
"south",
"husband",
"Congress",
"floor",
"campaign",
"material",
"population",
"call",
"economy",
"hospital",
"church",
"risk",
"fire",
"future",
"defense",
"security",
"bank",
"west",
"sport",
"board",
"subject",
"officer",
"rest",
"behavior",
"performance",
"top",
"goal",
"second",
"bed",
"order",
"author",
"blood",
"agency",
"nature",
"color",
"store",
"sound",
"movement",
"page",
"race",
"concern",
"series",
"language",
"response",
"animal",
"factor",
"decade",
"article",
"east",
"artist",
"scene",
"stock",
"career",
"treatment",
"approach",
"size",
"dog",
"fund",
"media",
"sign",
"thought",
"list",
"individual",
"quality",
"pressure",
"answer",
"resource",
"meeting",
"disease",
"success",
"cup",
"amount",
"ability",
"staff",
"character",
"growth",
"loss",
"degree",
"attack",
"region",
"television",
"box",
"TV",
"training",
"trade",
"deal",
"election",
"feeling",
"standard",
"bill",
"message",
"analysis",
"benefit",
"sex",
"lawyer",
"section",
"glass",
"skill",
"sister",
"professor",
"operation",
"crime",
"stage",
"authority",
"design",
"sort",
"one",
"knowledge",
"gun",
"station",
"strategy",
"truth",
"song",
"example",
"environment",
"leg",
"public",
"executive",
"set",
"rock",
"note",
"manager",
"help",
"network",
"science",
"memory",
"card",
"seat",
"cell",
"trial",
"expert",
"spring",
"firm",
"Democrat",
"radio",
"management",
"ball",
"talk",
"theory",
"impact",
"statement",
"charge",
"direction",
"weapon",
"employee",
"peace",
"base",
"pain",
"play",
"measure",
"interview",
"chair",
"fish",
"camera",
"structure",
"politics",
"bit",
"weight",
"candidate",
"production",
"trip",
"evening",
"conference",
"unit",
"style",
"adult",
"range",
"past",
"edge",
"writer",
"trouble",
"challenge",
"fear",
"shoulder",
"institution",
"sea",
"dream",
"bar",
"property",
"stuff",
"detail",
"method",
"magazine",
"hotel",
"soldier",
"cause",
"bag",
"heat",
"fall",
"marriage",
"surface",
"purpose",
"pattern",
"skin",
"agent",
"owner",
"machine",
"gas",
"generation",
"cancer",
"item",
"reality",
"coach",
"Mrs",
"yard",
"violence",
"investment",
"discussion",
"finger",
"garden",
"collection",
"task",
"partner",
"kitchen",
"consumer",
"shot",
"budget",
"painting",
"scientist",
"agreement",
"capital",
"mouth",
"victim",
"newspaper",
"threat",
"responsibility",
"attorney",
"score",
"account",
"break",
"audience",
"dinner",
"vote",
"debate",
"citizen",
"majority",
"wind",
"mission",
"customer",
"speech",
"option",
"participant",
"forest",
"video",
"Senate",
"reform",
"access",
"restaurant",
"judge",
"relation",
"bird",
"opinion",
"credit",
"corner",
"version",
"safety",
"neighborhood",
"act",
"troop",
"income",
"species",
"track",
"hope",
"sky",
"freedom",
"plane",
"object",
"attitude",
"labor",
"concept",
"client",
"conversation",
"variety",
"turn",
"investigation",
"researcher",
"press",
"conflict",
"spirit",
"argument",
"camp",
"brain",
"feature",
"afternoon",
"weekend",
"possibility",
"insurance",
"department",
"battle",
"beginning",
"date",
"crisis",
"fan",
"hole",
"element",
"vision",
"status",
"ship",
"solution",
"stone",
"scale",
"university",
"driver",
"attempt",
"park",
"spot",
"lack",
"ice",
"boat",
"sun",
"distance",
"wood",
"truck",
"return",
"mountain",
"survey",
"tradition",
"winter",
"village",
"sales",
"communication",
"run",
"screen",
"resident",
"gold",
"club",
"farm",
"increase",
"middle",
"presence",
"district",
"shape",
"reader",
"Ms",
"contract",
"crowd",
"apartment",
"strength",
"band",
"horse",
"target",
"prison",
"guard",
"demand",
"reporter",
"text",
"share",
"tool",
"vehicle",
"flight",
"facility",
"understanding",
"advantage",
"leadership",
"pound",
"basis",
"guest",
"sample",
"block",
"protection",
"while",
"identity",
"title",
"lesson",
"faith",
"river",
"living",
"technique",
"path",
"ear",
"shop",
"folk",
"principle",
"border",
"competition",
"claim",
"equipment",
"critic",
"aspect",
"failure",
"Christmas",
"comment",
"affair",
"procedure",
"chairman",
"baseball",
"egg",
"belief",
"murder",
"gift",
"religion",
"review",
"editor",
"coffee",
"document",
"speed",
"influence",
"youth",
"wave",
"move",
"quarter",
"background",
"reaction",
"suit",
"perspective",
"construction",
"intelligence",
"connection",
"shoe",
"grade",
"context",
"committee",
"mistake",
"focus",
"smile",
"location",
"clothes",
"neighbor",
"drive",
"function",
"bone",
"average",
"wine",
"voter",
"mean",
"learning",
"bus",
"hell",
"category",
"victory",
"key",
"visit",
"Internet",
"medicine",
"tour",
"photo",
"finding",
"classroom",
"contact",
"justice",
"pair",
"exercise",
"knee",
"flower",
"tape",
"supply",
"cut",
"will",
"actor",
"birth",
"search",
"democracy",
"circle",
"device",
"progress",
"front",
"bottom",
"island",
"exchange",
"studio",
"lady",
"colleague",
"application",
"neck",
"damage",
"plastic",
"plate",
"writing",
"start",
"expression",
"football",
"chicken",
"army",
"abuse",
"theater",
"map",
"session",
"danger",
"literature",
"rain",
"desire",
"assessment",
"injury",
"respect",
"fuel",
"leaf",
"instruction",
"fight",
"pool",
"lead",
"engine",
"salt",
"importance",
"metal",
"fat",
"ticket",
"software",
"lip",
"reading",
"lunch",
"farmer",
"sugar",
"planet",
"enemy",
"athlete",
"soul",
"panel",
"meaning",
"mom",
"instrument",
"weather",
"commitment",
"pocket",
"temperature",
"surprise",
"poll",
"proposal",
"consequence",
"half",
"breath",
"sight",
"cover",
"balance",
"minority",
"works",
"teaching",
"aid",
"advice",
"photograph",
"trail",
"novel",
"code",
"jury",
"breast",
"human",
"theme",
"storm",
"union",
"desk",
"thanks",
"fruit",
"conclusion",
"shadow",
"analyst",
"dance",
"limit",
"regulation",
"being",
"ring",
"revenue",
"county",
"appearance",
"package",
"difficulty",
"bridge",
"train",
"e-mail",
"thinking",
"trend",
"visitor",
"loan",
"investor",
"profit",
"crew",
"accident",
"male",
"meal",
"hearing",
"traffic",
"muscle",
"notion",
"earth",
"chest",
"cash",
"museum",
"beauty",
"emergency",
"stress",
"content",
"root",
"nose",
"bottle",
"setting",
"dress",
"file",
"outcome",
"ad",
"duty",
"sheet",
"extent",
"component",
"contrast",
"zone",
"airport",
"chief",
"shirt",
"pilot",
"cat",
"contribution",
"capacity",
"estate",
"guide",
"circumstance",
"snow",
"politician",
"percentage",
"meat",
"soil",
"surgery",
"basketball",
"golf",
"chain",
"address",
"branch",
"combination",
"governor",
"relief",
"user",
"dad",
"manner",
"silence",
"rating",
"motion",
"gender",
"fee",
"landscape",
"bowl",
"frame",
"host",
"hall",
"ocean",
"row",
"producer",
"regime",
"division",
"appeal",
"mirror",
"tooth",
"length",
"topic",
"variable",
"telephone",
"perception",
"confidence",
"bedroom",
"secret",
"debt",
"tank",
"nurse",
"coverage",
"opposition",
"bond",
"pleasure",
"master",
"era",
"requirement",
"check",
"stand",
"fun",
"expectation",
"wing",
"struggle",
"judgment",
"beer",
"English",
"reference",
"tear",
"doubt",
"minister",
"hero",
"cloud",
"winner",
"volume",
"travel",
"seed",
"fashion",
"pepper",
"intervention",
"copy",
"tip",
"welfare",
"vegetable",
"dish",
"beach",
"improvement",
"opening",
"route",
"league",
"core",
"rise",
"tie",
"holiday",
"resolution",
"household",
"abortion",
"witness",
"sector",
"representative",
"black",
"incident",
"flow",
"faculty",
"waste",
"mass",
"experiment",
"bomb",
"tone",
"engineer",
"wheel",
"female",
"promise",
"cable",
"AIDS",
"Jew",
"cream",
"secretary",
"gate",
"hill",
"noise",
"grass",
"hat",
"legislation",
"achievement",
"fishing",
"drink",
"talent",
"taste",
"characteristic",
"milk",
"sentence",
"height",
"physician",
"sleep",
"ride",
"explanation",
"campus",
"potential",
"immigrant",
"alternative",
"interaction",
"column",
"personality",
"signal",
"curriculum",
"honor",
"passenger",
"assistance",
"association",
"lab",
"offer",
"criticism",
"asset",
"depression",
"journalist",
"prayer",
"scholar",
"warning",
"climate",
"cheese",
"observation",
"childhood",
"payment",
"sir",
"cigarette",
"definition",
"priority",
"bread",
"creation",
"graduate",
"request",
"emotion",
"universe",
"gap",
"prosecutor",
"mark",
"green",
"airline",
"library",
"agenda",
"factory",
"selection",
"roof",
"expense",
"initiative",
"diet",
"funding",
"therapy",
"schedule",
"housing",
"post",
"dark",
"steel",
"chip",
"self",
"bike",
"tea",
"comparison",
"settlement",
"layer",
"planning",
"description",
"wedding",
"portion",
"territory",
"opponent",
"link",
"lake",
"tension",
"display",
"alcohol",
"saving",
"gain",
"desert",
"error",
"release",
"cop",
"walk",
"sand",
"hit",
"print",
"passage",
"transition",
"existence",
"album",
"participation",
"atmosphere",
"cycle",
"whole",
"resistance",
"discovery",
"exposure",
"stream",
"sale",
"trust",
"pot",
"coalition",
"tale",
"knife",
"phase",
"present",
"joke",
"coat",
"symptom",
"manufacturer",
"philosophy",
"potato",
"foundation",
"pass",
"negotiation",
"good",
"occasion",
"dust",
"investigator",
"jacket",
"reduction",
"shift",
"suicide",
"touch",
"substance",
"discipline",
"iron",
"passion",
"volunteer",
"gene",
"enforcement",
"sauce",
"independence",
"marketing",
"priest",
"advance",
"employer",
"shock",
"illness",
"cap",
"habit",
"juice",
"involvement",
"Indian",
"disaster",
"parking",
"prospect",
"boss",
"complaint",
"championship",
"mystery",
"poverty",
"entry",
"spending",
"king",
"symbol",
"maker",
"mood",
"emphasis",
"boot",
"entertainment",
"bean",
"evaluation",
"creature",
"commander",
"arrangement",
"total",
"anger",
"peak",
"disorder",
"missile",
"wire",
"round",
"distribution",
"transportation",
"twin",
"command",
"commission",
"interpretation",
"breakfast",
"stop",
"engineering",
"luck",
"clinic",
"veteran",
"tablespoon",
"tourist",
"tomato",
"exception",
"butter",
"deficit",
"bathroom",
"objective",
"ally",
"journey",
"reputation",
"mixture",
"tower",
"smoke",
"dimension",
"toy",
"prisoner",
"peer",
"designer",
"personnel",
"educator",
"relative",
"immigration",
"belt",
"teaspoon",
"birthday",
"implication",
"coast",
"supporter",
"silver",
"teenager",
"recognition",
"retirement",
"flag",
"recovery",
"watch",
"gentleman",
"corn",
"moon",
"throat",
"salary",
"observer",
"publication",
"crop",
"strike",
"phenomenon",
"anxiety",
"convention",
"exhibition",
"viewer",
"pan",
"consultant",
"administrator",
"mayor",
"consideration",
"CEO",
"estimate",
"buck",
"poem",
"grandmother",
"enterprise",
"testing",
"stomach",
"suggestion",
"mail",
"recipe",
"preparation",
"concert",
"intention",
"channel",
"tube",
"drawing",
"protein",
"absence",
"roll",
"jail",
"diversity",
"pace",
"employment",
"speaker",
"impression",
"essay",
"respondent",
"cake",
"historian",
"specialist",
"origin",
"approval",
"mine",
"drop",
"count",
"depth",
"wealth",
"disability",
"shell",
"professional",
"pack",
"onion",
"deputy",
"brand",
"award",
"criteria",
"dealer",
"utility",
"highway",
"routine",
"wage",
"phrase",
"ingredient",
"stake",
"fiber",
"activist",
"terrorism",
"refugee",
"hip",
"corporation",
"assumption",
"gear",
"barrier",
"provision",
"killer",
"gang",
"chemical",
"label",
"teen",
"index",
"vacation",
"advocate",
"draft",
"heaven",
"drama",
"satellite",
"wonder",
"clock",
"chocolate",
"ceiling",
"advertising",
"button",
"bell",
"rank",
"darkness",
"clothing",
"fence",
"portrait",
"paint",
"survival",
"lawsuit",
"testimony",
"bunch",
"beat",
"burden",
"chamber",
"furniture",
"cooperation",
"string",
"ceremony",
"cheek",
"profile",
"mechanism",
"penalty",
"match",
"resort",
"destruction",
"bear",
"tissue",
"pant",
"stranger",
"infection",
"cabinet",
"apple",
"virus",
"dispute",
"fortune",
"assistant",
"statistics",
"shopping",
"cousin",
"white",
"port",
"electricity",
"adviser",
"pay",
"spokesman",
"incentive",
"slave",
"terror",
"expansion",
"elite",
"dirt",
"rice",
"bullet",
"Bible",
"chart",
"decline",
"conservative",
"stick",
"concentration",
"champion",
"scenario",
"telescope",
"reflection",
"revolution",
"strip",
"tournament",
"fiction",
"lifetime",
"recommendation",
"senator",
"hunting",
"salad",
"boundary",
"satisfaction",
"journal",
"bench",
"lover",
"awareness",
"general",
"deck",
"pole",
"mode",
"dialogue",
"founder",
"pride",
"aircraft",
"delivery",
"platform",
"finance",
"joy",
"worth",
"singer",
"shooting",
"offense",
"counter",
"DNA",
"smell",
"transfer",
"protest",
"crash",
"craft",
"treaty",
"terrorist",
"insight",
"lie",
"episode",
"fault",
"mix",
"assault",
"stair",
"adventure",
"proof",
"headquarters",
"violation",
"tongue",
"license",
"hold",
"shelter",
"controversy",
"entrance",
"favorite",
"tragedy",
"net",
"funeral",
"profession",
"establishment",
"imagination",
"mask",
"presentation",
"introduction",
"representation",
"deer",
"partnership",
"pollution",
"emission",
"fate",
"earnings",
"oven",
"distinction",
"segment",
"poet",
"variation",
"comfort",
"honey",
"correspondent",
"musician",
"significance",
"load",
"vessel",
"storage",
"leather",
"evolution",
"tribe",
"shelf",
"can",
"grandfather",
"lawn",
"buyer",
"dining",
"wisdom",
"council",
"instance",
"garlic",
"capability",
"poetry",
"celebrity",
"stability",
"fantasy",
"plot",
"framework",
"gesture",
"psychology",
"counselor",
"chapter",
"fellow",
"divorce",
"pipe",
"math",
"shade",
"tail",
"obligation",
"angle",
"palm",
"custom",
"economist",
"soup",
"celebration",
"composition",
"pile",
"carbon",
"scheme",
"crack",
"frequency",
"tobacco",
"survivor",
"psychologist",
"galaxy",
"ski",
"limitation",
"appointment",
"preference",
"meter",
"explosion",
"arrest",
"fighter",
"admission",
"hunter",
"friendship",
"aide",
"infant",
"porch",
"tendency",
"uniform",
"formation",
"scholarship",
"reservation",
"efficiency",
"mall",
"scandal",
"PC",
"heel",
"privacy",
"fabric",
"contest",
"proportion",
"guideline",
"rifle",
"maintenance",
"conviction",
"trick",
"tent",
"examination",
"publisher",
"French",
"myth",
"cow",
"standing",
"tennis",
"nerve",
"barrel",
"bombing",
"membership",
"ratio",
"menu",
"purchase",
"lifestyle",
"humor",
"glove",
"suspect",
"narrative",
"photographer",
"helicopter",
"Catholic",
"provider",
"delay",
"stroke",
"scope",
"punishment",
"handful",
"horizon",
"girlfriend",
"cholesterol",
"adjustment",
"taxpayer",
"principal",
"motivation",
"assignment",
"restriction",
"laboratory",
"workshop",
"auto",
"cotton",
"motor",
"flavor",
"sequence",
"demonstration",
"jet",
"consumption",
"blade",
"medication",
"cabin",
"edition",
"valley",
"pitch",
"pine",
"manufacturing",
"Christian",
"complex",
"chef",
"discrimination",
"German",
"boom",
"heritage",
"God",
"shit",
"lemon",
"economics",
"nut",
"legacy",
"extension",
"fly",
"battery",
"arrival",
"orientation",
"inflation",
"flame",
"cluster",
"wound",
"shower",
"operating",
"flesh",
"garage",
"operator",
"instructor",
"comedy",
"mortgage",
"sanction",
"habitat",
"grain",
"consciousness",
"measurement",
"province",
"ethics",
"nomination",
"permission",
"actress",
"summit",
"acid",
"odds",
"frustration",
"medium",
"grant",
"shore",
"lung",
"discourse",
"basket",
"fighting",
"competitor",
"powder",
"ghost",
"cookie",
"carrier",
"cooking",
"swing",
"orange",
"pet",
"miracle",
"rhythm",
"killing",
"sin",
"charity",
"script",
"tactic",
"identification",
"transformation",
"headline",
"venture",
"invasion",
"military",
"piano",
"grocery",
"intensity",
"blanket",
"margin",
"quarterback",
"mouse",
"rope",
"prescription",
"brick",
"patch",
"consensus",
"horror",
"recording",
"painter",
"pie",
"sake",
"gaze",
"courage",
"pregnancy",
"clue",
"win",
"confusion",
"slice",
"occupation",
"coal",
"criminal",
"formula",
"uncle",
"square",
"captain",
"gallery",
"soccer",
"defendant",
"tunnel",
"fitness",
"lap",
"grave",
"toe",
"container",
"virtue",
"architect",
"makeup",
"inquiry",
"rose",
"indication",
"rail",
"anniversary",
"couch",
"alliance",
"hypothesis",
"boyfriend",
"mess",
"legend",
"adolescent",
"norm",
"remark",
"reward",
"organ",
"laughter",
"northwest",
"counseling",
"receiver",
"ritual",
"insect",
"salmon",
"favor",
"trading",
"combat",
"stem",
"surgeon",
"physics",
"rape",
"counsel",
"brush",
"jeans",
"log",
"pill",
"sculpture",
"compound",
"flour",
"slope",
"presidency",
"serving",
"bishop",
"drinking",
"cry",
"acceptance",
"collapse",
"pump",
"candy",
"evil",
"final",
"medal",
"export",
"midnight",
"curve",
"integrity",
"logic",
"essence",
"closet",
"interior",
"corridor",
"pitcher",
"snake",
"cross",
"weakness",
"pig",
"cold",
"T-shirt",
"unemployment",
"civilization",
"pop",
"correlation",
"humanity",
"developer",
"excitement",
"beef",
"stretch",
"architecture",
"elbow",
"allegation",
"airplane",
"duck",
"dose",
"lecture",
"van",
"bay",
"suburb",
"sandwich",
"trunk",
"rumor",
"implementation",
"cloth",
"effectiveness",
"lens",
"reach",
"inspector",
"fraud",
"companion",
"nail",
"array",
"rat",
"hallway",
"cave",
"southwest",
"monster",
"obstacle",
"encounter",
"herb",
"integration",
"crystal",
"recession",
"wish",
"motive",
"flood",
"pen",
"ownership",
"nightmare",
"notice",
"inspection",
"supervisor",
"arena",
"laugh",
"diagnosis",
"possession",
"basement",
"prosecution",
"announcement",
"warrior",
"prediction",
"bacteria",
"questionnaire",
"mud",
"infrastructure",
"privilege",
"temple",
"broadcast",
"wrist",
"curtain",
"monitor",
"pond",
"domain",
"guilt",
"cattle",
"walking",
"playoff",
"skirt",
"database",
"aim",
"limb",
"ideology",
"harm",
"railroad",
"radiation",
"horn",
"innovation",
"strain",
"guitar",
"replacement",
"dancer",
"amendment",
"pad",
"transmission",
"grace",
"colony",
"adoption",
"slide",
"civilian",
"towel",
"particle",
"glance",
"prize",
"landing",
"conduct",
"blue",
"bat",
"alarm",
"festival",
"grip",
"freshman",
"sweat",
"European",
"separation",
"southeast",
"ballot",
"rhetoric",
"vitamin",
"enthusiasm",
"wilderness",
"mandate",
"pause",
"excuse",
"uncertainty",
"chaos",
"canvas",
"lobby",
"format",
"trait",
"currency",
"turkey",
"reserve",
"beam",
"astronomer",
"corruption",
"contractor",
"doctrine",
"thumb",
"unity",
"compromise",
"rush",
"complexity",
"fork",
"disk",
"suspicion",
"lock",
"finish",
"residence",
"shame",
"sidewalk",
"Olympics",
"signature",
"rebel",
"spouse",
"fluid",
"pension",
"sodium",
"blow",
"promotion",
"forehead",
"hook",
"detective",
"traveler",
"compensation",
"exit",
"attraction",
"pickup",
"needle",
"belly",
"portfolio",
"shuttle",
"timing",
"engagement",
"ankle",
"transaction",
"counterpart",
"rider",
"doll",
"noon",
"exhibit",
"carbohydrate",
"liberty",
"poster",
"theology",
"oxygen",
"magic",
"sum",
"businessman",
"determination",
"donor",
"pastor",
"jazz",
"opera",
"Japanese",
"bite",
"acquisition",
"pit",
"wildlife",
"giant",
"primary",
"equity",
"doorway",
"departure",
"elevator",
"guidance",
"happiness",
"statue",
"pursuit",
"repair",
"gym",
"clerk",
"Israeli",
"envelope",
"reporting",
"destination",
"fist",
"exploration",
"bath",
"rescue",
"indicator",
"sunlight",
"feedback",
"spectrum",
"laser",
"starting",
"expertise",
"tune",
"eating",
"hint",
"parade",
"realm",
"ban",
"therapist",
"pizza",
"recipient",
"accounting",
"bias",
"metaphor",
"candle",
"handle",
"worry",
"entity",
"suffering",
"feel",
"lamp",
"garbage",
"servant",
"addition",
"inside",
"reception",
"chin",
"necessity",
"racism",
"starter",
"banking",
"gravity",
"prevention",
"performer",
"intent",
"inventory",
"assembly",
"silk",
"magnitude",
"hostage",
"collector",
"popularity",
"kiss",
"alien",
"equation",
"angel",
"switch",
"offering",
"rage",
"photography",
"toilet",
"Russian",
"wake",
"gathering",
"automobile",
"dawn",
"tide",
"romance",
"hardware",
"pillow",
"kit",
"cook",
"spread",
"continent",
"circuit",
"sink",
"ruling",
"shortage",
"trap",
"fool",
"deadline",
"processing",
"ranch",
"diamond",
"credibility",
"import",
"sentiment",
"cart",
"elder",
"pro",
"inspiration",
"quantity",
"trailer",
"mate",
"genius",
"monument",
"bid",
"quest",
"sacrifice",
"invitation",
"accuracy",
"juror",
"broker",
"treasure",
"loyalty",
"gasoline",
"output",
"nominee",
"diabetes",
"jaw",
"grief",
"rocket",
"inmate",
"dynamics",
"bow",
"senior",
"dignity",
"carpet",
"bubble",
"buddy",
"barn",
"sword",
"flash",
"glory",
"drum",
"queen",
"dilemma",
"input",
"northeast",
"liability",
"merchant",
"stadium",
"defeat",
"withdrawal",
"refrigerator",
"nest",
"lane",
"ancestor",
"steam",
"accent",
"escape",
"cage",
"shrimp",
"homeland",
"rack",
"costume",
"wolf",
"courtroom",
"statute",
"cartoon",
"productivity",
"seal",
"bug",
"aunt",
"agriculture",
"bankruptcy",
"vaccine",
"bonus",
"collaboration",
"orbit",
"patience",
"voting",
"patrol",
"willingness",
"revelation",
"rent",
"jewelry",
"trace",
"wagon",
"reliability",
"ass",
"bush",
"clip",
"thigh",
"bull",
"drawer",
"sheep",
"coordinator",
"runner",
"empire",
"cab",
"exam",
"documentary",
"biology",
"web",
"conspiracy",
"catch",
"casualty",
"republic",
"execution",
"whale",
"instinct",
"teammate",
"aluminum",
"ministry",
"verdict",
"skull",
"self-esteem",
"ease",
"bee",
"practitioner",
"loop",
"puzzle",
"mushroom",
"subsidy",
"mathematics",
"mechanic",
"jar",
"earthquake",
"pork",
"creativity",
"dessert",
"sympathy",
"fisherman",
"isolation",
"sock",
"jump",
"entrepreneur",
"syndrome",
"bureau",
"workplace",
"ambition",
"touchdown",
"breeze",
"Christianity",
"translation",
"gut",
"booth",
"helmet",
"waist",
"lion",
"accomplishment",
"panic",
"cast",
"cliff",
"cord",
"cocaine",
"illusion",
"appreciation",
"commissioner",
"flexibility",
"casino",
"tumor",
"pulse",
"equivalent",
"hay",
"donation",
"diary",
"sibling",
"irony",
"spoon",
"midst",
"alley",
"soap",
"rival",
"pin",
"hockey",
"supplier",
"momentum",
"purse",
"liquid",
"icon",
"elephant",
"legislature",
"associate",
"franchise",
"bicycle",
"fever",
"filter",
"rabbit",
"coin",
"organism",
"sensation",
"stay",
"minimum",
"conservation",
"backyard",
"charter",
"stove",
"consent",
"reminder",
"placement",
"dough",
"grandchild",
"dam",
"outfit",
"columnist",
"workout",
"patent",
"quote",
"trash",
"hormone",
"texture",
"pencil",
"frontier",
"spray",
"bet",
"custody",
"banker",
"beast",
"oak",
"notebook",
"attendance",
"speculation",
"shark",
"mill",
"installation",
"tag",
"swimming",
"fleet",
"catalog",
"outsider",
"stance",
"sensitivity",
"debut",
"confrontation",
"ideal",
"constitution",
"trainer",
"Thanksgiving",
"scent",
"stack",
"eyebrow",
"sack",
"tray",
"pioneer",
"textbook",
"dot",
"wheat",
"kingdom",
"aisle",
"protocol",
"marketplace",
"terrain",
"pasta",
"genre",
"merit",
"planner",
"chunk",
"discount",
"ladder",
"jungle",
"migration",
"breathing",
"hurricane",
"retailer",
"coup",
"ambassador",
"density",
"curiosity",
"aggression",
"stimulus",
"journalism",
"robot",
"feather",
"sphere",
"publicity",
"major",
"well-being",
"validity",
"ecosystem",
"collar",
"weed",
"compliance",
"streak",
"builder",
"glimpse",
"premise",
"specialty",
"artifact",
"monkey",
"mentor",
"listener",
"lightning",
"sleeve",
"disappointment",
"rib",
"debris",
"rod",
"liberal",
"ash",
"parish",
"slavery",
"commodity",
"cure",
"mineral",
"hunger",
"equality",
"cemetery",
"harassment",
"fame",
"likelihood",
"carrot",
"toll",
"rim",
"wheelchair",
"squad",
"processor",
"sponsor",
"grin",
"chill",
"refuge",
"legislator",
"rally",
"programming",
"outlet",
"vendor",
"peanut",
"intellectual",
"conception",
"auction",
"steak",
"triumph",
"shareholder",
"conscience",
"calculation",
"interval",
"jurisdiction",
"constraint",
"expedition",
"similarity",
"butt",
"lid",
"bulk",
"mortality",
"conversion",
"patron",
"liver",
"harmony",
"tolerance",
"instant",
"goat",
"blessing",
"banana",
"running",
"palace",
"peasant",
"grandparent",
"lawmaker",
"supermarket",
"cruise",
"plain",
"calendar",
"widow",
"deposit",
"beard",
"brake",
"screening",
"impulse",
"fur",
"predator",
"forum",
"dancing",
"removal",
"autonomy",
"thread",
"landmark",
"offender",
"fraction",
"tourism",
"threshold",
"suite",
"regulator",
"straw",
"globe",
"objection",
"chemistry",
"blast",
"denial",
"rental",
"fragment",
"warmth",
"undergraduate",
"headache",
"policeman",
"yield",
"projection",
"mention",
"graduation",
"mansion",
"regard",
"grape",
"cottage",
"driveway",
"charm",
"sexuality",
"clay",
"balloon",
"invention",
"ego",
"fare",
"homework",
"disc",
"sofa",
"guarantee",
"availability",
"radar",
"leave",
"permit",
"sweater",
"rehabilitation",
"retreat",
"molecule",
"youngster",
"premium",
"accountability",
"fatigue",
"marker",
"bucket",
"confession",
"marble",
"twist",
"defender",
"transport",
"surveillance",
"technician",
"arrow",
"trauma",
"ribbon",
"meantime",
"harvest",
"spy",
"slot",
"riot",
"nutrient",
"citizenship",
"sovereignty",
"ridge",
"lighting",
"contributor",
"transit",
"seminar",
"electronics",
"shorts",
"accusation",
"cue",
"bride",
"biography",
"hazard",
"tile",
"foreigner",
"launch",
"convenience",
"delight",
"timber",
"plea",
"bulb",
"devil",
"bolt",
"cargo",
"spine",
"seller",
"dock",
"fog",
"diplomat",
"summary",
"missionary",
"epidemic",
"warehouse",
"butterfly",
"bronze",
"praise",
"vacuum",
"stereotype",
"sensor",
"laundry",
"manual",
"pistol",
"plaintiff",
"apology"
		);
	
	$p = array(
		"it",
		"I",
		"you",
		"he",
		"they",
		"we",
		"she",
		"who",
		"them",
		"me",
		"him",
		"one",
		"her",
		"us",
		"something",
		"nothing",
		"anything",
		"himself",
		"everything",
		"someone",
		"themselves",
		"everyone",
		"itself",
		"anyone",
		"myself",
		"other",
		"each",
		"herself",
		"everybody",
		"yourself",
		"somebody",
		"whom",
		"none",
		"no",
		"nobody",
		"anybody",
		"lots",
		"ourselves",
		"his",
		"plenty",
		"mine",
		"another",
		"yours",
		"hers",
		"ours",
		"whoever"
		);
	
	$r = array(
		"up",
"so",
"out",
"just",
"now",
"how",
"then",
"more",
"also",
"here",
"well",
"only",
"very",
"even",
"back",
"there",
"down",
"still",
"in",
"as",
"too",
"when",
"never",
"really",
"most",
"on",
"why",
"about",
"over",
"again",
"where",
"right",
"off",
"always",
"today",
"all",
"far",
"long",
"away",
"often",
"yet",
"ever",
"however",
"almost",
"later",
"much",
"once",
"least",
"ago",
"together",
"around",
"already",
"enough",
"both",
"maybe",
"actually",
"probably",
"home",
"course",
"perhaps",
"little",
"else",
"sometimes",
"finally",
"less",
"better",
"early",
"especially",
"either",
"quite",
"simply",
"nearly",
"soon",
"certainly",
"quickly",
"no",
"recently",
"before",
"usually",
"thus",
"exactly",
"hard",
"particularly",
"pretty",
"forward",
"PM",
"ok",
"clearly",
"indeed",
"rather",
"that",
"tonight",
"close",
"suddenly",
"best",
"instead",
"ahead",
"fast",
"alone",
"eventually",
"directly",
"immediately",
"absolutely",
"therefore",
"please",
"completely",
"by",
"AM",
"along",
"generally",
"easily",
"through",
"slowly",
"bit",
"obviously",
"inside",
"highly",
"mostly",
"tomorrow",
"anyway",
"apparently",
"slightly",
"twice",
"kind",
"below",
"relatively",
"fully",
"yesterday",
"otherwise",
"increasingly",
"somewhere",
"above",
"carefully",
"straight",
"okay",
"somehow",
"under",
"largely",
"basically",
"anymore",
"possibly",
"currently",
"deep",
"truly",
"outside",
"hardly",
"extremely",
"ultimately",
"neither",
"late",
"significantly",
"frequently",
"part",
"forth",
"meanwhile",
"entirely",
"aside",
"anywhere",
"somewhat",
"seriously",
"totally",
"everywhere",
"necessarily",
"specifically",
"apart",
"barely",
"merely",
"definitely",
"typically",
"unfortunately",
"closely",
"virtually",
"first",
"behind",
"forever",
"deeply",
"primarily",
"fairly",
"widely",
"rarely",
"elsewhere",
"moreover",
"essentially",
"sure",
"previously",
"whenever",
"heavily",
"approximately",
"equally",
"strongly",
"surely",
"perfectly",
"literally",
"occasionally",
"constantly",
"rapidly",
"particular",
"quietly",
"general",
"effectively",
"precisely",
"nevertheless",
"normally",
"personally",
"roughly",
"like",
"ie",
"initially",
"though",
"gently",
"likely",
"similarly",
"newly",
"naturally",
"mainly",
"regularly",
"partly",
"potentially",
"politically",
"shortly",
"originally",
"properly",
"regardless",
"easy",
"nowhere",
"gradually",
"since",
"briefly",
"besides",
"publicly",
"etc",
"badly",
"across",
"differently",
"successfully",
"furthermore",
"physically",
"repeatedly",
"nonetheless",
"high",
"abroad",
"dramatically",
"surprisingly",
"lightly",
"tight",
"greatly",
"online",
"daily",
"seemingly",
"frankly",
"consistently",
"last",
"past",
"hence",
"simultaneously",
"traditionally",
"wherever",
"nearby",
"respectively",
"short",
"commonly",
"altogether",
"historically",
"firmly",
"loud",
"wrong",
"thereby",
"overall",
"practically",
"sharply",
"automatically",
"hopefully",
"readily",
"annually",
"lately",
"softly",
"sexually",
"way",
"officially",
"tightly",
"thoroughly",
"instantly",
"afterward",
"safely",
"incredibly",
"near",
"presumably",
"actively",
"fortunately",
"consequently",
"correctly",
"mentally",
"partially",
"upstairs",
"alike",
"reportedly",
"desperately",
"someday",
"worldwide",
"exclusively",
"openly",
"likewise",
"strictly",
"supposedly",
"legally",
"socially",
"halfway",
"deliberately",
"this",
"considerably",
"inevitably",
"emotionally",
"allegedly",
"any",
"solely",
"formerly",
"downtown",
"happily",
"privately",
"routinely",
"overnight",
"freely",
"steadily",
"ironically",
"beyond",
"low",
"substantially",
"within",
"severely",
"importantly",
"terribly",
"sudden",
"seldom",
"economically",
"honestly",
"accurately",
"public",
"sometime",
"nationwide"
		);
	
	$u = array(
		"yes",
		"oh",
		"yeah",
		"no",
		"hey",
		"hi",
		"hello",
		"mm-hmm",
		"ah",
		"wow",
		"huh",
		"uh",
		"ha"
		);
	
	$v = array(
		"be",
"have",
"do",
"say",
"go",
"can",
"get",
"would",
"make",
"know",
"will",
"think",
"take",
"see",
"come",
"could",
"want",
"look",
"use",
"find",
"give",
"tell",
"work",
"may",
"should",
"call",
"try",
"ask",
"need",
"feel",
"become",
"leave",
"put",
"mean",
"keep",
"let",
"begin",
"seem",
"help",
"talk",
"turn",
"start",
"might",
"show",
"hear",
"play",
"run",
"move",
"like",
"live",
"believe",
"hold",
"bring",
"happen",
"must",
"write",
"provide",
"sit",
"stand",
"lose",
"pay",
"meet",
"include",
"continue",
"set",
"learn",
"change",
"lead",
"understand",
"watch",
"follow",
"stop",
"create",
"speak",
"read",
"allow",
"add",
"spend",
"grow",
"open",
"walk",
"win",
"offer",
"remember",
"love",
"consider",
"appear",
"buy",
"wait",
"serve",
"die",
"send",
"expect",
"build",
"stay",
"fall",
"cut",
"reach",
"kill",
"remain",
"suggest",
"raise",
"pass",
"sell",
"require",
"report",
"decide",
"pull",
"return",
"explain",
"hope",
"develop",
"carry",
"drive",
"break",
"thank",
"receive",
"join",
"agree",
"pick",
"wear",
"support",
"end",
"hit",
"base",
"produce",
"eat",
"teach",
"face",
"cover",
"describe",
"catch",
"draw",
"choose",
"cause",
"point",
"listen",
"realize",
"place",
"close",
"involve",
"increase",
"seek",
"deal",
"fight",
"throw",
"fill",
"represent",
"focus",
"drop",
"plan",
"push",
"reduce",
"note",
"enter",
"share",
"rise",
"shoot",
"save",
"protect",
"lie",
"occur",
"accept",
"identify",
"determine",
"prepare",
"argue",
"recognize",
"indicate",
"wonder",
"lay",
"fail",
"arrive",
"name",
"present",
"answer",
"compare",
"miss",
"act",
"state",
"discuss",
"force",
"check",
"laugh",
"guess",
"study",
"prove",
"hang",
"design",
"forget",
"claim",
"remove",
"sound",
"enjoy",
"form",
"establish",
"visit",
"care",
"avoid",
"imagine",
"finish",
"respond",
"maintain",
"reveal",
"contain",
"head",
"control",
"apply",
"shake",
"fly",
"manage",
"perform",
"discover",
"treat",
"affect",
"worry",
"mention",
"improve",
"sign",
"reflect",
"sing",
"exist",
"address",
"test",
"step",
"beat",
"tend",
"notice",
"wish",
"smile",
"figure",
"relate",
"travel",
"prevent",
"born",
"admit",
"assume",
"suffer",
"publish",
"cost",
"release",
"own",
"recall",
"stare",
"hurt",
"strike",
"achieve",
"refer",
"conduct",
"announce",
"examine",
"touch",
"attend",
"vote",
"sleep",
"experience",
"replace",
"encourage",
"complete",
"stick",
"define",
"introduce",
"drink",
"handle",
"refuse",
"roll",
"gain",
"hide",
"express",
"ride",
"deliver",
"observe",
"emerge",
"earn",
"operate",
"contribute",
"settle",
"feed",
"collect",
"promote",
"count",
"marry",
"order",
"survive",
"lift",
"jump",
"gather",
"limit",
"fit",
"cry",
"associate",
"result",
"insist",
"approach",
"spread",
"ignore",
"measure",
"demonstrate",
"engage",
"cross",
"threaten",
"commit",
"deny",
"blow",
"destroy",
"cook",
"charge",
"burn",
"view",
"dress",
"promise",
"extend",
"combine",
"demand",
"remind",
"fire",
"depend",
"grab",
"participate",
"hire",
"tie",
"train",
"lean",
"hate",
"press",
"intend",
"attack",
"shut",
"welcome",
"nod",
"paint",
"direct",
"climb",
"expand",
"disappear",
"explore",
"obtain",
"surround",
"invite",
"repeat",
"predict",
"bear",
"adopt",
"attempt",
"connect",
"belong",
"organize",
"acknowledge",
"record",
"fear",
"struggle",
"conclude",
"last",
"shift",
"mark",
"locate",
"recommend",
"generate",
"propose",
"capture",
"prefer",
"search",
"feature",
"link",
"select",
"declare",
"appreciate",
"launch",
"defend",
"matter",
"judge",
"ought",
"ensure",
"mix",
"wake",
"challenge",
"warn",
"steal",
"pursue",
"slip",
"influence",
"blame",
"estimate",
"investigate",
"kick",
"solve",
"eliminate",
"trust",
"score",
"afford",
"confirm",
"fix",
"rely",
"complain",
"issue",
"back",
"range",
"attract",
"file",
"clear",
"pour",
"stir",
"clean",
"grant",
"account",
"stretch",
"rest",
"separate",
"aim",
"cite",
"divide",
"oppose",
"question",
"rush",
"employ",
"dance",
"match",
"lack",
"emphasize",
"decline",
"invest",
"expose",
"succeed",
"celebrate",
"accuse",
"hand",
"land",
"reject",
"escape",
"cast",
"convince",
"assess",
"lower",
"approve",
"acquire",
"compete",
"mind",
"list",
"regard",
"knock",
"review",
"wrap",
"display",
"suspect",
"permit",
"scream",
"drag",
"recover",
"arrest",
"wash",
"purchase",
"shout",
"suppose",
"perceive",
"slow",
"slide",
"inform",
"abandon",
"transform",
"bother",
"consist",
"enable",
"bend",
"shall",
"rule",
"preserve",
"arrange",
"reply",
"lock",
"deserve",
"tear",
"pose",
"benefit",
"resolve",
"contact",
"interview",
"quote",
"urge",
"breathe",
"elect",
"pack",
"implement",
"inspire",
"adjust",
"retire",
"kiss",
"dominate",
"transfer",
"analyze",
"attach",
"coach",
"exercise",
"enhance",
"impose",
"evaluate",
"trade",
"accomplish",
"illustrate",
"monitor",
"concentrate",
"vary",
"ring",
"race",
"smell",
"light",
"toss",
"bury",
"pray",
"block",
"confront",
"glance",
"shape",
"accompany",
"whisper",
"swing",
"dig",
"plant",
"resist",
"embrace",
"supply",
"assist",
"construct",
"line",
"date",
"secure",
"smoke",
"bind",
"favor",
"weigh",
"install",
"quit",
"comment",
"negotiate",
"restore",
"pop",
"advise",
"criticize",
"assure",
"arise",
"schedule",
"dream",
"snap",
"incorporate",
"switch",
"graduate",
"assign",
"wave",
"yell",
"sweep",
"spin",
"house",
"yield",
"wind",
"found",
"react",
"communicate",
"taste",
"disagree",
"advance",
"proceed",
"track",
"bet",
"overcome",
"occupy",
"encounter",
"wipe",
"honor",
"retain",
"translate",
"process",
"interpret",
"detect",
"balance",
"flow",
"market",
"guarantee",
"pause",
"withdraw",
"testify",
"imply",
"dismiss",
"bake",
"freeze",
"sink",
"respect",
"evolve",
"justify",
"possess",
"tap",
"double",
"swim",
"tire",
"free",
"relax",
"rub",
"practice",
"fade",
"characterize",
"alter",
"spot",
"constitute",
"squeeze",
"target",
"convert",
"load",
"appeal",
"pretend",
"split",
"violate",
"stress",
"adapt",
"flee",
"distribute",
"doubt",
"guide",
"witness",
"owe",
"sustain",
"mount",
"differ",
"store",
"damage",
"satisfy",
"consume",
"fund",
"trace",
"educate",
"calculate",
"rid",
"waste",
"qualify",
"derive",
"impress",
"resemble",
"surprise",
"strengthen",
"rate",
"explode",
"prompt",
"request",
"absorb",
"sue",
"overlook",
"float",
"undergo",
"assert",
"print",
"bite",
"risk",
"suit",
"register",
"appoint",
"sense",
"dry",
"wander",
"submit",
"anticipate",
"shrug",
"cope",
"host",
"depict",
"collapse",
"borrow",
"brush",
"devote",
"crack",
"ease",
"seize",
"function",
"distinguish",
"correct",
"portray",
"persuade",
"ban",
"admire",
"exceed",
"crash",
"exhibit",
"chase",
"document",
"recruit",
"swear",
"defeat",
"reinforce",
"sigh",
"attribute",
"dare",
"cool",
"highlight",
"decrease",
"compose",
"peer",
"rank",
"regulate",
"shine",
"upset",
"resign",
"invent",
"interrupt",
"concern",
"hunt",
"echo",
"integrate",
"rent",
"delay",
"shop",
"finance",
"beg",
"sponsor",
"slam",
"melt",
"entitle",
"park",
"exclude",
"greet",
"murder",
"march",
"pitch",
"excuse",
"fold",
"reverse",
"flash",
"tip",
"confuse",
"plead",
"initiate",
"swallow",
"motivate",
"render",
"trap",
"restrict",
"enforce",
"lend",
"contend",
"assemble",
"burst",
"speed",
"protest",
"facilitate",
"rip",
"top",
"label",
"consult",
"forgive",
"warm",
"project",
"drift",
"drain",
"hurry",
"suck",
"leap",
"dump",
"execute",
"average",
"tune",
"endure",
"behave",
"administer",
"guard",
"await",
"trigger",
"spill",
"convict",
"modify",
"award",
"boost",
"undermine",
"survey",
"research",
"stuff",
"govern",
"accommodate",
"praise",
"injure",
"abuse",
"apologize",
"scatter",
"convey",
"twist",
"relieve",
"suspend",
"desire",
"resume",
"rebuild",
"bounce",
"click",
"signal",
"dedicate",
"carve",
"ship",
"scare",
"rescue",
"diagnose",
"crawl",
"frame",
"hug",
"punish",
"endorse",
"program",
"picture",
"age",
"volunteer",
"advocate",
"strip",
"cancel",
"blend",
"slice",
"peel",
"hesitate",
"flip",
"debate",
"vanish",
"trail",
"confess",
"enroll",
"diminish",
"value",
"minimize",
"chop",
"isolate",
"pump",
"repair",
"prohibit",
"command",
"stumble",
"descend",
"hook",
"cooperate",
"seal",
"scan",
"undertake",
"reserve",
"spring",
"oversee",
"stem",
"credit",
"shock",
"please",
"slap",
"donate",
"tackle",
"heat",
"tuck",
"post",
"specialize",
"sail",
"condemn",
"unite",
"equip",
"exchange",
"grin",
"bless",
"rock",
"root",
"conceive",
"grasp",
"position",
"calm",
"haul",
"concede",
"ruin",
"discourage",
"divorce",
"star",
"draft",
"instruct",
"manipulate",
"edit",
"whip",
"boil",
"seat",
"utilize",
"dissolve",
"object",
"spell",
"insert",
"crush",
"tolerate",
"harm",
"scramble",
"decorate",
"sort",
"interact",
"punch",
"persist",
"shed",
"foster",
"cheat",
"access",
"heal",
"exploit",
"shove",
"comprise",
"counter",
"disclose",
"interfere",
"outline",
"gaze",
"uncover",
"reward",
"stimulate",
"sacrifice",
"compel",
"proclaim",
"hike",
"cease",
"inherit",
"shrink",
"model",
"envision",
"weaken",
"deploy",
"distract",
"invade",
"classify",
"wound",
"aid",
"skip",
"flood",
"dip",
"tighten",
"boast",
"pat",
"unfold",
"joke",
"deem",
"sneak",
"disturb",
"pile",
"spare",
"cure",
"regret",
"cling",
"blink",
"plunge",
"color",
"rain",
"steer",
"cheer",
"thrive",
"chew",
"comply",
"transport",
"scratch",
"compromise",
"strain",
"sprinkle",
"arm",
"forbid",
"poke",
"opt",
"trouble",
"soar",
"enact",
"round",
"remark",
"exhaust",
"circle",
"prevail",
"screw",
"battle",
"drill",
"authorize",
"pound",
"frown",
"regain",
"broadcast",
"overwhelm",
"contemplate",
"update",
"spark",
"speculate",
"preach",
"bomb",
"provoke",
"fish",
"mutter",
"depart",
"soak",
"transmit",
"screen",
"coordinate",
"specify",
"frustrate",
"crowd",
"articulate",
"swell",
"soften",
"photograph",
"straighten",
"bow",
"weave",
"copy",
"trim",
"accelerate",
"drown",
"spit",
"harvest",
"kneel",
"dictate",
"kid"
		);
	
	$keys = array(
		"article" => $a,
		"conjunction" => $c,
		"preposition" => $i,
		"adjective" => $j,
		"numeral" => $m,
		"noun" => $n,
		"pronoun" => $p,
		"adverb" => $r,
		"interjection" => $u,
		"verb" => $v
		);
	
	if (array_key_exists($type, $keys)) {
		$rand = rand(0, sizeof($keys[$type])-1);
		$word = $keys[$type][$rand];
		
		if ($plural=="s") {
			if (substr($word, -2)=="ty") $word = substr($word, 0, -2) . "ties";
			else if (substr($word, -2)=="by") $word = substr($word, 0, -2) . "bies";
			else if (substr($word, -2)=="cy") $word = substr($word, 0, -2) . "cies";
			else if (substr($word, -2)=="dy") $word = substr($word, 0, -2) . "dies";
			else if (substr($word, -2)=="ky") $word = substr($word, 0, -2) . "kies";
			else if (substr($word, -2)=="ly") $word = substr($word, 0, -2) . "lies";
			else if (substr($word, -2)=="my") $word = substr($word, 0, -2) . "mies";
			else if (substr($word, -2)=="ny") $word = substr($word, 0, -2) . "nies";
			else if (substr($word, -2)=="py") $word = substr($word, 0, -2) . "pies";
			else if (substr($word, -2)=="ry") $word = substr($word, 0, -2) . "ries";
			else if (substr($word, -1)=="f") $word = substr($word, 0, -1) . "ves";
			else if (substr($word, -1)=="s") $word = substr($word, 0, -1) . "ses";
			else if (substr($word, -1)=="x") $word = substr($word, 0, -1) . "xes";
			else if (substr($word, -2)=="ch") $word = substr($word, 0, -2) . "ches";
			else $word .= "s";
		}
		
		return $word;
	}
	return false;
}

function getRandomPhrase() {
	$rand = rand(0,13);
	
	switch ($rand) {
	case 0:
		$phrase = randomWord("article") . delimiter() . randomWord("noun") . delimiter(true) . randomWord("verb", "s");
		break;
	case 1:
		$phrase = randomWord("noun", "s") . delimiter() . randomWord("verb") . delimiter(true) . randomWord("adjective") . delimiter() . randomWord("noun");
		break;
	case 2:
		$phrase = randomWord("pronoun") . delimiter(true) . randomWord("verb", "s") . "," . randomWord("adverb");
		break;
	case 3:
		$phrase = randomWord("interjection") . delimiter(true) .randomWord("pronoun") . delimiter() . randomWord("verb", "s") . delimiter() . randomWord("noun");
		break;
	case 4:
		$phrase = randomWord("numeral") . delimiter() . randomWord("noun", "s") . delimiter(true) . randomWord("conjunction") . delimiter() . randomWord("article") . delimiter() . randomWord("noun");
		break;
	case 5:
		$phrase = randomWord("numeral") . delimiter() . randomWord("adjective") . delimiter(true) . randomWord("noun", "s") . delimiter() . randomWord("verb");
		break;
	case 6:
		$phrase = randomWord("preposition") . delimiter(true) . randomWord("noun") . delimiter() . randomWord("verb") . delimiter() . randomWord("adjective");
		break;
	case 6:
		$phrase = randomWord("noun") . delimiter() . randomWord("preposition") . delimiter(true) . randomWord("noun");
		break;
	case 7:
		$phrase = randomWord("article") . delimiter() . randomWord("adjective") . delimiter(true) . randomWord("noun") . delimiter() . randomWord("verb", "s");
		break;
	case 8:
		$phrase = randomWord("article") . delimiter(true) . randomWord("adjective") . delimiter() . randomWord("noun");
		break;
	case 9:
		$phrase = randomWord("adjective") . delimiter() . randomWord("conjunction") . delimiter(true) . randomWord("adjective");
		break;
	case 10:
		$phrase = randomWord("adjective") . delimiter() . randomWord("conjunction") . delimiter(true) . randomWord("adjective") . delimiter() . randomWord("noun");
		break;
	case 11:
		$phrase = randomWord("adjective") . delimiter(true) . randomWord("noun", "s") . delimiter() . randomWord("verb") . delimiter() . randomWord("adverb");
		break;
	case 12:
		$phrase = rand(2,99) . delimiter() . randomWord("noun", "s") . delimiter(true) . randomWord("verb") . delimiter() . randomWord("adverb");
		break;
	case 13:
		$phrase = randomWord("verb") . delimiter() . randomWord("article") . delimiter(true) . randomWord("adjective") . delimiter() . randomWord("noun");
		break;
	}
	
	$rand2 = rand(0,10);
	if ($rand2==1) $phrase .= "!";
	if ($rand2==2) $phrase .= "?";
	if ($rand2==3) {
		$rand3 = rand(0,99);
		$phrase .= $rand3;
	}
	
	return $phrase;
}

function delimiter($allow=false) {
	if ($allow) {
		$rand2 = rand(0,15);
		if ($rand2<10) return $rand2;
	}
	
	$rand = rand(0,5);
	switch ($rand) {
	case 0:
		return "_";
		break;
	case 1:
		return "-";
		break;
	case 2:
		return "+";
		break;
	case 3:
		return "=";
		break;
	case 4:
		return "/";
		break;
	case 5:
		return ".";
		break;
	}
	return "";
}

function checkFreeUsername($mysqli, $teststring) {
	$sql = "SELECT `username` FROM `users` WHERE `username` LIKE '$teststring' LIMIT 1";
	$res = $mysqli->query($sql);
	if (mysqli_num_rows($res)) {
		return 1;//In use
	}
	
	$sql = "SELECT `username` FROM `pending_users` WHERE `username` LIKE '$teststring' LIMIT 1";
	$res = $mysqli->query($sql);
	if (mysqli_num_rows($res)) {
		return 2;//In pending
	}
	
	return 0;
}

function getExistingAccount($mysqli, $username) {
	$res = $mysqli->query("SELECT `uid`, `passhash`, `passhash2`, `email`, `joined` FROM users WHERE `username` like '$username' LIMIT 1");
	if (!$res) {
		 return -2;
	}		
	if ($res->num_rows == 0) {
		 return -1;
	}
	else {
		return $res->fetch_object();
	}
}

function generateActivationCode($mysqli, $username, $email, $passhash, $type=1, $userid='NULL') {
	$activation = getRandomPhrase();
	$activation = $mysqli->real_escape_string($activation);
	
	if ($type==3) {
		$info = getExistingAccount($mysqli, $username);
		if ($info->email!=$email) return -2;//The person is trying to send the password change into an email address not associated with the account
	}
	if ($type==2) {
		$info = getExistingAccount($mysqli, $username);
		if ($info->passhash2!=$passhash) return -3;//Wrong password
	}
	
	$sql = "INSERT INTO `pending_users` (`username`, `passhash`, `email`, `joined`, `activation`, `type`, `userid`) VALUES ('$username', '$passhash', '$email', CURRENT_TIMESTAMP(), '$activation', '$type', $userid)";
	$mysqli->query($sql);
	$result = $mysqli->insert_id;
	if (!$result) return 0;
	
	if ($type==1) $mailcheck = mailActivation($mysqli, $email);
	if ($type==2) $mailcheck = mailEmailChange($mysqli, $email);
	if ($type==3) $mailcheck = mailPasswordReset($mysqli, $email);
	if (!$mailcheck) return -1;
	return 1;
}

function mailActivation($mysqli, $email) {
	$sql = "SELECT `username`, `activation`, `joined` FROM `pending_users` WHERE `email` LIKE '$email' AND `type`=1 LIMIT 1";
	$res = $mysqli->query($sql);
	if (mysqli_num_rows($res)) {
		$row = mysqli_fetch_object($res);
		
		$msg = "Your email address was used to request an account from Otherworld-PBBG.com. Below are your activation details.\n\n";
		$msg .= "Username: " . $row->username . "\n";
		$msg .= "Password: (what ever you registered with, withheld for security purposes)\n";
		$msg .= "Activation code: " . $row->activation . "\n\n";
		$msg .= "Go to http://www.otherworld-pbbg.com/activate.php and paste your activation code in the box.\n\n";
		$msg .= "Disclaimer: Forgotten passwords cannot be recovered, but you can reguest for a password reset if you forget your password. Password reset requires access to this email address you registered with. Keep your email address up to date because if you forget your password and don't have a valid email address, you lose access to your account permanently.\n";
		$msg .= "The request was made on $row->joined server time. If you did not request this message, you can just ignore it and the pending account will be purged in 24 hours.\n\n";
		$msg .= "(This is an automatically sent message. Don't reply to it because the reply address doesn't actually exist.)";
		
		$msg = wordwrap($msg,70);
		$headers = "From: noreply@otherworld-pbbg.com";
		
		$result = mail($email, "Welcome to Otherworld!", $msg, $headers);
		
		if ($result) return 1;
	}
	return 0;
}

function mailEmailChange($mysqli, $email) {
	$sql = "SELECT `username`, `activation`, `joined` FROM `pending_users` WHERE `email` LIKE '$email' AND `type`=2 LIMIT 1";
	$res = $mysqli->query($sql);
	if (mysqli_num_rows($res)) {
		$row = mysqli_fetch_object($res);
		
		$msg = "An account in Otherworld-PBBG.com set this as their new email address. Details are below.\n\n";
		$msg .= "Username: " . $row->username . "\n";
		$msg .= "Activation code: " . $row->activation . "\n\n";
		$msg .= "Go to http://www.otherworld-pbbg.com/activate.php and paste your activation code in the box.\n\n";
		$msg .= "If you request for a password reset before confirming your email change, the activation code will go in the old email address, so if you no longer have access to that or it's blank, make sure to use this activation code first before reseting your password.\n\n";
		$msg .= "The request was made on $row->joined server time. If you did not request this message, you can just ignore it and the email change request will be purged in 24 hours.\n\n";
		$msg .= "(This is an automatically sent message. Don't reply to it because the reply address doesn't actually exist.)";
		
		$msg = wordwrap($msg,70);
		$headers = "From: noreply@otherworld-pbbg.com";
		
		$result = mail($email, "Otherworld email change request", $msg, $headers);
		
		if ($result) return 1;
	}
	return 0;
}

function mailPasswordReset($mysqli, $email) {
	$sql = "SELECT `email`, `username`, `activation`, `joined` FROM `pending_users` WHERE `email` LIKE '$email' AND `type`=3 LIMIT 1";
	$res = $mysqli->query($sql);
	if (mysqli_num_rows($res)) {
		$row = mysqli_fetch_object($res);
		
		$msg = "An account in Otherworld-PBBG.com linked to this email address requested for a password reset. Details are below.\n\n";
		$msg .= "Username: " . $row->username . "\n";
		$msg .= "Activation code: " . $row->activation . "\n\n";
		$msg .= "Go to http://www.otherworld-pbbg.com/activate.php, paste your activation code in the box and provide a new password.\n\n";
		$msg .= "Until you enter the correct code, the account will continue being accessible with the old password.\n\n";
		$msg .= "The request was made on $row->joined server time. If you did not request this message, or requested it accidentally, you can just ignore it and the password reset request will be purged in 24 hours.\n\n";
		$msg .= "(This is an automatically sent message. Don't reply to it because the reply address doesn't actually exist.)";
		
		$msg = wordwrap($msg,70);
		$headers = "From: noreply@otherworld-pbbg.com";
		
		$result = mail($row->email, "Otherworld password reset request", $msg, $headers);
		
		if ($result) return 1;
	}
	return 0;
}

function activateAccount($mysqli, $username, $activation) {
	$sql = "SELECT `uid`, `username`, `passhash`, `email` FROM `pending_users` WHERE `username` LIKE '$username' AND `activation` LIKE '$activation' AND `type`=1 LIMIT 1";
	$res = $mysqli->query($sql);
	if (mysqli_num_rows($res)) {
		$row = mysqli_fetch_object($res);
		$sql2 = "INSERT INTO `users` (`username`, `passhash2`, `email`, `joined`) VALUES ('$row->username', '$row->passhash', '$row->email', CURRENT_TIMESTAMP())";
		$mysqli->query($sql2);
		$result = $mysqli->insert_id;
		if ($result) {
			$r=queryDelete($mysqli, "pending_users", "`uid`=$row->uid", "`uid`", 1);
			if ($r==0) return -2;//user account was generated successfully but pending account was left hanging
			return 100;//success
		}
		return -1;//creating user account failed
	}
	
	return 0;//activation code is wrong or username doesn't exist
}

function activateEmail($mysqli, $username, $activation) {
	$sql = "SELECT `uid`, `email`, `userid` FROM `pending_users` WHERE `username` LIKE '$username' AND `activation` LIKE '$activation' AND `type`=2 LIMIT 1";
	$res = $mysqli->query($sql);
	if (mysqli_num_rows($res)) {
		$row = mysqli_fetch_object($res);
		$sql2 = "UPDATE `users` SET `email`='$row->email' WHERE `uid`=$row->userid LIMIT 1";
		$mysqli->query($sql2);
		if ($mysqli->affected_rows==1) {
			$r=queryDelete($mysqli, "pending_users", "`uid`=$row->uid", "`uid`", 1);
			if ($r==0) return -2;//email was changed successfully but pending account was left hanging
			return 100;//success
		}
		return -1;//changing email failed
	}
	return 0;//activation code is wrong or username doesn't exist
}

function resetPassword($mysqli, $username, $activation, $passhash) {
	$sql = "SELECT `uid`, `userid` FROM `pending_users` WHERE `username` LIKE '$username' AND `activation` LIKE '$activation' AND `type`=3 LIMIT 1";
	$res = $mysqli->query($sql);
	if (mysqli_num_rows($res)) {
		$row = mysqli_fetch_object($res);
		$sql2 = "UPDATE `users` SET `passhash2`='$passhash' WHERE `uid`=$row->userid LIMIT 1";
		$mysqli->query($sql2);
		if ($mysqli->affected_rows==1) {
			$r=queryDelete($mysqli, "pending_users", "`uid`=$row->uid", "`uid`", 1);
			if ($r==0) return -2;//passwrord was changed successfully but pending account was left hanging
			return 100;//success
		}
		return -1;//changing password failed
	}
	return 0;//activation code is wrong or username doesn't exist
}

function isUsername($element)
{
	return !preg_match ("/[^A-z0-9_\-]/", $element);
}

function countAvgColor($im, $startx, $starty, $endx, $endy) {
	$rTotal = 0;
	$gTotal = 0;
	$bTotal = 0;
	$total = 0;
	
	if ($endx<imagesx($im)) $endx = imagesx($im);
	if ($endy<imagesy($im)) $endy = imagesy($im);
	for ($y=$starty; $y<$endy; $y++) {
		for ($x = $startx; $x<$endx; $x++) {
			$rgb = imagecolorat($im, $x, $y);
			$r = ($rgb >> 16) & 0xFF;
			$g = ($rgb >> 8) & 0xFF;
			$b = $rgb & 0xFF;
			
			$rTotal += $r;
			$gTotal += $g;
			$bTotal += $b;
			$total++;
		}
	}
	
	return array(
		"r" => round($rTotal/$total),
		"g" => round($gTotal/$total),
		"b" => round($bTotal/$total)
		);
}

function setBetween($val, $min, $max, $default) {
	if (!is_numeric($val)) return $default;
	if ($val<$min) return $min;
	if ($val>$max) return $max;
	return $val;
}

function setBint($val, $min, $max, $default) {
	if (!is_numeric($val)) return $default;
	if ($val<$min) return $min;
	if ($val>$max) return $max;
	return round($val);
}

function secondEquation($x1, $y1, $x2, $y2) {
	$m = ($y2-$y1)/($x2-$x1);
	//m(x2-x1) = y2-y1
	//mx2 - mx1 = y2 - y1
	//y2 = m x2 - m x1 + y1
	$a = $m * $x1 + $y1;
	return array(
		"m" => $m,
		"a" => $a
		);
}

function pointInTriangle($x, $y, $x1, $y1, $x2, $y2, $x3, $y3) {
	$check1 = side($x, $y, $x1, $y1, $x2, $y2, $x3, $y3);
        $check2 = side($x, $y, $x1, $y1, $x3, $y3, $x2, $y2);
        $check3 = side($x, $y, $x3, $y3, $x2, $y2, $x1, $y1);
	if ($check1&&$check2&&$check3) return true;
	return false;
}

function side($x, $y, $x1, $y1, $x2, $y2, $x3, $y3)
{
    if ($x1 - $x2 != 0) {
        $k    = ($y1 - $y2) / ($x1 - $x2);
        $s1   = $y3 - ($k * ($x3 - $x1) + $y1);
        $s2   = $y - $y1 - $k * ($x - $x1);
    }
    else {
        $s1   = $x3 - $x1;
        $s2   = $x - $x1;
    }
    return ($s1 * $s2) >= 0;
}

function in_range($number, $min, $max, $inclusive = FALSE)
{
    if (is_int($number) && is_int($min) && is_int($max))
    {
        return $inclusive
            ? ($number >= $min && $number <= $max)
            : ($number > $min && $number < $max) ;
    }

    return FALSE;
}
?>
